<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <!-- Resource Optimization -->
    <!-- DNS Prefetch for external resources -->
    <link rel="dns-prefetch" href="https://cdnjs.cloudflare.com">
    <link rel="dns-prefetch" href="https://fonts.googleapis.com">
    <link rel="dns-prefetch" href="https://fonts.gstatic.com">
    <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
    
    <!-- Preconnect to critical origins -->
    <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-translate="marketplace.page_title">üõçÔ∏è Marketplace Social | La Tanda Web3</title>
    <!-- Shared Components Integration - Load First for Priority -->
    <link rel="stylesheet" href="shared-components-v2.css">
    <!-- Translation System Styles -->
    <link rel="stylesheet" href="translation-styles.css">
    <!-- Critical CSS: Font Awesome with async loading -->
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" as="style" onload="this.onload=null;this.rel=stylesheet">
    <noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"></noscript>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- Optimized Google Fonts loading -->
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" as="style" onload="this.onload=null;this.rel=stylesheet">
    <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"></noscript>
    <style>
        /* ================================
           üåê WEB3 DESIGN SYSTEM
           ================================ */
        :root {
            /* La Tanda Web3 Colors */
            --tanda-cyan: #00FFFF;
            --tanda-cyan-light: #7FFFD8;
            --tanda-cyan-dark: #00E5E5;
            --tanda-black: #000000;
            --text-primary: #f8fafc;
            --text-secondary: rgba(248, 250, 252, 0.7);
            --text-accent: #00FFFF;
            --bg-primary: #0f172a;
            --bg-secondary: #1e293b;
            --bg-card: rgba(15, 23, 42, 0.6);
            --border-card: rgba(0, 255, 255, 0.1);
            --border-accent: rgba(0, 255, 255, 0.2);
            --crypto-gold: #ffd700;
            --success-color: #22d55e;
            --warning-color: #fbbf24;
            --error-color: #f87171;
            --info-color: #3b82f6;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-primary);
            min-height: 100vh;
            padding: 20px;
            color: var(--text-primary);
            overflow-x: hidden;
            position: relative;
        }
        
        /* ================================
           ‚ú® BACKGROUND EFFECTS
           ================================ */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 20%, rgba(0, 255, 255, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(0, 255, 255, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 40% 60%, rgba(255, 215, 0, 0.03) 0%, transparent 50%);
            pointer-events: none;
            z-index: 0;
        }
        
        /* ================================
           üß≠ NAVIGATION
           ================================ */
        .nav-header {
            background: var(--bg-card);
            backdrop-filter: blur(24px);
            border: 1px solid var(--border-accent);
            border-radius: 16px;
            padding: 20px 24px;
            margin-bottom: 32px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
            z-index: 1;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        
        .nav-left {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .back-btn {
            background: linear-gradient(135deg, var(--tanda-cyan), var(--tanda-cyan-light));
            color: var(--tanda-black);
            border: none;
            padding: 10px 20px;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            font-size: 14px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .back-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 255, 255, 0.3);
        }
        
        .page-title {
            font-size: 28px;
            font-weight: 700;
            background: linear-gradient(135deg, var(--tanda-cyan), var(--tanda-cyan-light));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 0 20px rgba(0, 255, 255, 0.3);
        }
        
        .nav-links {
            display: flex;
            gap: 16px;
        }
        
        .nav-link {
            color: var(--text-secondary);
            text-decoration: none;
            padding: 8px 16px;
            border-radius: 8px;
            transition: all 0.3s ease;
            border: 1px solid transparent;
        }
        
        .nav-link:hover {
            color: var(--tanda-cyan);
            background: rgba(0, 255, 255, 0.1);
            border-color: var(--border-accent);
        }
        
        /* ================================
           üìä MAIN CONTAINER
           ================================ */
        .marketplace-container {
            max-width: 1400px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }
        
        /* ================================
           üìã MARKETPLACE TABS
           ================================ */
        .marketplace-tabs {
            background: var(--bg-card);
            backdrop-filter: blur(24px);
            border: 1px solid var(--border-card);
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 32px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        
        .tab-navigation {
            display: flex;
            gap: 4px;
            margin-bottom: 32px;
            background: rgba(0, 0, 0, 0.3);
            padding: 4px;
            border-radius: 12px;
            overflow-x: auto;
        }
        
        .tab-btn {
            flex: 1;
            min-width: 120px;
            padding: 12px 16px;
            background: transparent;
            border: none;
            border-radius: 8px;
            color: var(--text-secondary);
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            font-size: 14px;
        }
        
        .tab-btn.active {
            background: linear-gradient(135deg, var(--tanda-cyan), var(--tanda-cyan-light));
            color: var(--tanda-black);
            box-shadow: 0 4px 15px rgba(0, 255, 255, 0.3);
        }
        
        .tab-btn:hover:not(.active) {
            background: rgba(0, 255, 255, 0.1);
            color: var(--tanda-cyan);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }
        
        /* ================================
           üõçÔ∏è MARKETPLACE GRID
           ================================ */
        .marketplace-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 24px;
            margin-bottom: 32px;
        }
        
        .marketplace-item {
            background: var(--bg-card);
            backdrop-filter: blur(24px);
            border: 1px solid var(--border-card);
            border-radius: 16px;
            padding: 20px;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }
        
        .marketplace-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0, 255, 255, 0.1), transparent);
            transition: left 0.5s ease;
        }
        
        .marketplace-item:hover {
            border-color: var(--border-accent);
            transform: translateY(-4px);
            box-shadow: 0 12px 40px rgba(0, 255, 255, 0.15);
        }
        
        .marketplace-item:hover::before {
            left: 100%;
        }
        
        .item-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 16px;
        }
        
        .item-image {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, var(--tanda-cyan), var(--tanda-cyan-light));
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            color: var(--tanda-black);
            margin-bottom: 16px;
            box-shadow: 0 8px 25px rgba(0, 255, 255, 0.3);
        }
        
        .item-badge {
            background: rgba(0, 255, 255, 0.2);
            color: var(--tanda-cyan);
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 10px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .item-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 8px;
        }
        
        .item-description {
            font-size: 14px;
            color: var(--text-secondary);
            line-height: 1.5;
            margin-bottom: 16px;
        }
        
        .item-stats {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
            padding: 12px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
        }
        
        .stat-item {
            text-align: center;
        }
        
        .stat-value {
            font-size: 16px;
            font-weight: 700;
            color: var(--tanda-cyan);
        }
        
        .stat-label {
            font-size: 11px;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .item-actions {
            display: flex;
            gap: 8px;
        }
        
        .btn-marketplace {
            flex: 1;
            padding: 10px 16px;
            border-radius: 8px;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--tanda-cyan), var(--tanda-cyan-light));
            color: var(--tanda-black);
        }
        
        .btn-primary:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 15px rgba(0, 255, 255, 0.3);
        }
        
        .btn-secondary {
            background: transparent;
            color: var(--text-secondary);
            border: 1px solid var(--border-card);
        }
        
        .btn-secondary:hover {
            color: var(--tanda-cyan);
            border-color: var(--tanda-cyan);
        }
        
        /* ================================
           üë• SOCIAL FEED
           ================================ */
        .social-feed {
            display: grid;
            gap: 16px;
        }
        
        .social-post {
            background: var(--bg-card);
            backdrop-filter: blur(24px);
            border: 1px solid var(--border-card);
            border-radius: 16px;
            padding: 20px;
            transition: all 0.3s ease;
        }
        
        .social-post:hover {
            border-color: var(--border-accent);
            transform: translateY(-2px);
        }
        
        .post-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
        }
        
        .user-avatar {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, var(--tanda-cyan), var(--tanda-cyan-light));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--tanda-black);
            font-weight: 700;
            font-size: 18px;
        }
        
        .user-info h4 {
            color: var(--text-primary);
            font-weight: 600;
            margin-bottom: 2px;
        }
        
        .user-info .post-time {
            color: var(--text-secondary);
            font-size: 12px;
        }
        
        .post-content {
            color: var(--text-primary);
            line-height: 1.6;
            margin-bottom: 16px;
        }
        
        .post-actions {
            display: flex;
            gap: 24px;
        }
        
        .action-btn {
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            transition: all 0.3s ease;
        }
        
        .action-btn:hover {
            color: var(--tanda-cyan);
        }
        
        /* ================================
           üè™ TRENDING SECTION
           ================================ */
        .trending-section {
            background: var(--bg-card);
            backdrop-filter: blur(24px);
            border: 1px solid var(--border-card);
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 32px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        
        .trending-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }
        
        .trending-title {
            font-size: 20px;
            font-weight: 600;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .trending-items {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
        }
        
        .trending-item {
            background: rgba(0, 0, 0, 0.3);
            padding: 16px;
            border-radius: 12px;
            border: 1px solid var(--border-card);
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .trending-item:hover {
            border-color: var(--border-accent);
            transform: translateY(-2px);
        }
        
        .trending-item h4 {
            color: var(--text-primary);
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 8px;
        }
        
        .trending-item .price {
            color: var(--tanda-cyan);
            font-weight: 700;
            font-size: 16px;
        }
        
        .trending-item .change {
            font-size: 12px;
            margin-top: 4px;
        }
        
        .change.positive {
            color: var(--success-color);
        }
        
        .change.negative {
            color: var(--error-color);
        }
        
        /* ================================
           üì± RESPONSIVE DESIGN
           ================================ */
        @media (max-width: 768px) {
            body {
                padding: 16px;
            }
            
            .nav-header {
                flex-direction: column;
                gap: 16px;
                text-align: center;
            }
            
            .nav-left {
                flex-direction: column;
                gap: 12px;
            }
            
            .tab-navigation {
                flex-wrap: wrap;
            }
            
            .tab-btn {
                min-width: 100px;
                font-size: 12px;
            }
            
            .marketplace-grid {
                grid-template-columns: 1fr;
            }
            
            .trending-items {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .item-actions {
                flex-direction: column;
            }
        }
        
        /* ================================
           ‚ú® ANIMATIONS
           ================================ */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        /* ================================
           üé® SPECIAL EFFECTS
           ================================ */
        .glow-effect {
            position: relative;
        }
        
        .glow-effect::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: inherit;
            border-radius: inherit;
            filter: blur(8px);
            opacity: 0.5;
            z-index: -1;
        }

        /* ================================
           üõçÔ∏è MARKETPLACE REDESIGN
           ================================ */

        .main-navigation {
            margin: 24px 0;
        }

        .nav-tabs-container {
            display: flex;
            gap: 8px;
            background: var(--bg-card);
            backdrop-filter: blur(24px);
            border: 1px solid var(--border-card);
            border-radius: 16px;
            padding: 8px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .main-tab {
            background: none;
            border: none;
            color: var(--text-secondary);
            padding: 12px 20px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            font-weight: 500;
            min-width: 120px;
            justify-content: center;
        }

        .main-tab:hover {
            background: rgba(0, 255, 255, 0.1);
            color: var(--tanda-cyan);
        }

        .main-tab.active {
            background: linear-gradient(135deg, rgba(0, 255, 255, 0.2), rgba(0, 255, 255, 0.1));
            color: var(--tanda-cyan);
            box-shadow: 0 4px 15px rgba(0, 255, 255, 0.2);
        }

        .sell-tab {
            background: linear-gradient(135deg, var(--crypto-gold), #ffed4e) !important;
            color: var(--tanda-black) !important;
        }

        .sell-tab:hover {
            background: linear-gradient(135deg, #ffed4e, var(--crypto-gold)) !important;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 215, 0, 0.3);
        }

        .tab-content {
            display: none;
            margin-top: 24px;
        }

        .tab-content.active {
            display: block;
        }

        /* Search and Filters */
        .search-filters-bar {
            background: var(--bg-card);
            backdrop-filter: blur(24px);
            border: 1px solid var(--border-card);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 24px;
            display: flex;
            gap: 16px;
            align-items: center;
            flex-wrap: wrap;
        }

        .search-container {
            position: relative;
            flex: 1;
            min-width: 250px;
        }

        .search-icon {
            position: absolute;
            left: 16px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-secondary);
        }

        .search-input {
            width: 100%;
            background: var(--bg-secondary);
            border: 1px solid var(--border-card);
            border-radius: 12px;
            padding: 12px 16px 12px 48px;
            color: var(--text-primary);
            font-size: 14px;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--tanda-cyan);
            box-shadow: 0 0 0 3px rgba(0, 255, 255, 0.1);
        }

        .filters-container {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }

        .filter-select {
            background: var(--bg-secondary);
            border: 1px solid var(--border-card);
            border-radius: 8px;
            padding: 8px 12px;
            color: var(--text-primary);
            font-size: 13px;
            min-width: 140px;
        }

        .filter-select:focus {
            outline: none;
            border-color: var(--tanda-cyan);
        }

        /* Products Grid */
        .products-grid, .services-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }

        .product-card, .service-card {
            background: var(--bg-card);
            backdrop-filter: blur(24px);
            border: 1px solid var(--border-card);
            border-radius: 16px;
            padding: 20px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .product-card:hover, .service-card:hover {
            transform: translateY(-4px);
            border-color: var(--tanda-cyan);
            box-shadow: 0 8px 32px rgba(0, 255, 255, 0.1);
        }

        .product-image {
            width: 100%;
            height: 180px;
            background: var(--bg-secondary);
            border-radius: 12px;
            margin-bottom: 16px;
            position: relative;
            overflow: hidden;
        }

        .product-title, .service-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .product-price, .service-price {
            font-size: 18px;
            font-weight: 700;
            color: var(--tanda-cyan);
            margin-bottom: 8px;
        }

        .product-seller, .service-provider {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 12px;
        }

        .seller-avatar {
            width: 24px;
            height: 24px;
            background: var(--tanda-cyan);
            border-radius: 50%;
            font-size: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--tanda-black);
        }

        .seller-name {
            font-size: 13px;
            color: var(--text-secondary);
        }

        .rating-stars {
            color: var(--crypto-gold);
            font-size: 12px;
            margin-left: auto;
        }

        .product-actions, .service-actions {
            display: flex;
            gap: 8px;
        }

        .action-btn-primary {
            background: linear-gradient(135deg, var(--tanda-cyan), var(--tanda-cyan-dark));
            color: var(--tanda-black);
            border: none;
            border-radius: 8px;
            padding: 8px 16px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            flex: 1;
        }

        .action-btn-secondary {
            background: none;
            color: var(--tanda-cyan);
            border: 1px solid var(--tanda-cyan);
            border-radius: 8px;
            padding: 8px 16px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        /* Sell Section */
        .sell-section {
            text-align: center;
        }

        .sell-header h2 {
            font-size: 28px;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .sell-header p {
            color: var(--text-secondary);
            margin-bottom: 32px;
        }

        .sell-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 24px;
            max-width: 800px;
            margin: 0 auto;
        }

        .sell-option-card {
            background: var(--bg-card);
            backdrop-filter: blur(24px);
            border: 2px solid var(--border-card);
            border-radius: 16px;
            padding: 32px 24px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .sell-option-card:hover {
            transform: translateY(-4px);
            border-color: var(--tanda-cyan);
            box-shadow: 0 8px 32px rgba(0, 255, 255, 0.2);
        }

        .sell-icon {
            font-size: 48px;
            margin-bottom: 16px;
        }

        .sell-option-card h3 {
            color: var(--text-primary);
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .sell-option-card p {
            color: var(--text-secondary);
            font-size: 14px;
        }

        /* View All Button */
        .view-all-btn {
            background: none;
            border: 1px solid var(--border-accent);
            color: var(--tanda-cyan);
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 13px;
            transition: all 0.3s ease;
        }

        .view-all-btn:hover {
            background: rgba(0, 255, 255, 0.1);
            transform: translateX(4px);
        }

        /* Trending Items */
        .trending-items {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 16px;
            margin-top: 16px;
        }

        .trending-item {
            background: var(--bg-card);
            backdrop-filter: blur(24px);
            border: 1px solid var(--border-card);
            border-radius: 12px;
            padding: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .trending-item:hover {
            transform: translateY(-2px);
            border-color: var(--tanda-cyan);
            box-shadow: 0 6px 24px rgba(0, 255, 255, 0.1);
        }

        .trending-icon {
            font-size: 24px;
            width: 40px;
            text-align: center;
        }

        .trending-info h4 {
            color: var(--text-primary);
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .trending-price {
            color: var(--tanda-cyan);
            font-size: 13px;
            font-weight: 700;
        }

        .trending-change {
            background: var(--success-color);
            color: white;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 10px;
            margin-left: 8px;
        }

        .trending-change.positive {
            background: var(--success-color);
        }

        .trending-change.negative {
            background: var(--error-color);
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .nav-tabs-container {
                flex-direction: column;
            }
            
            .main-tab {
                min-width: auto;
                width: 100%;
            }
            
            .search-filters-bar {
                flex-direction: column;
                align-items: stretch;
            }
            
            .filters-container {
                justify-content: center;
            }
            
            .products-grid, .services-grid {
                grid-template-columns: 1fr;
            }

            .trending-items {
                grid-template-columns: 1fr;
            }
        }

        /* ================================
           üìù SELL PRODUCT MODAL
           ================================ */

        .sell-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 10000;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .sell-modal-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
        }

        .sell-modal-content {
            background: var(--bg-card);
            backdrop-filter: blur(24px);
            border: 1px solid var(--border-accent);
            border-radius: 20px;
            max-width: 600px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
        }

        .sell-modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 24px;
            border-bottom: 1px solid var(--border-card);
        }

        .sell-modal-header h2 {
            color: var(--text-primary);
            font-size: 24px;
            font-weight: 700;
        }

        .close-modal-btn {
            background: none;
            border: none;
            color: var(--text-secondary);
            font-size: 20px;
            cursor: pointer;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .close-modal-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            color: var(--text-primary);
        }

        .sell-form {
            padding: 0 24px 24px;
        }

        .form-step {
            display: none;
        }

        .form-step.active {
            display: block;
        }

        .step-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }

        .step-header h3 {
            color: var(--text-primary);
            font-size: 20px;
            font-weight: 600;
        }

        .step-indicator {
            display: flex;
            gap: 8px;
        }

        .step {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: var(--bg-secondary);
            color: var(--text-secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .step.active {
            background: var(--tanda-cyan);
            color: var(--tanda-black);
        }

        .step.completed {
            background: var(--success-color);
            color: white;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
        }

        .form-group label {
            display: block;
            color: var(--text-primary);
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            background: var(--bg-secondary);
            border: 1px solid var(--border-card);
            border-radius: 12px;
            padding: 12px 16px;
            color: var(--text-primary);
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--tanda-cyan);
            box-shadow: 0 0 0 3px rgba(0, 255, 255, 0.1);
        }

        .form-group textarea {
            height: 100px;
            resize: vertical;
            font-family: inherit;
        }

        .char-counter {
            color: var(--text-secondary);
            font-size: 12px;
            text-align: right;
            margin-top: 4px;
        }

        .price-input-container {
            position: relative;
        }

        .currency-label {
            position: absolute;
            right: 16px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--tanda-cyan);
            font-weight: 600;
            font-size: 14px;
        }

        .form-group input[type="number"] {
            padding-right: 50px;
        }

        .photo-upload-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 12px;
            margin-bottom: 8px;
        }

        .photo-upload-slot {
            aspect-ratio: 1;
            background: var(--bg-secondary);
            border: 2px dashed var(--border-card);
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .photo-upload-slot:hover {
            border-color: var(--tanda-cyan);
            background: rgba(0, 255, 255, 0.05);
        }

        .photo-upload-slot i {
            font-size: 24px;
            color: var(--text-secondary);
            margin-bottom: 4px;
        }

        .photo-upload-slot span {
            font-size: 12px;
            color: var(--text-secondary);
        }

        .form-help {
            color: var(--text-secondary);
            font-size: 12px;
            margin-top: 4px;
        }

        .checkbox-container,
        .radio-container {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            cursor: pointer;
            padding: 12px;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .checkbox-container:hover,
        .radio-container:hover {
            background: rgba(0, 255, 255, 0.05);
        }

        .checkbox-container input,
        .radio-container input {
            width: auto;
            margin: 0;
        }

        .checkmark,
        .radio-checkmark {
            width: 20px;
            height: 20px;
            border: 2px solid var(--border-card);
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            margin-top: 2px;
        }

        .radio-checkmark {
            border-radius: 50%;
        }

        .radio-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .radio-content {
            display: flex;
            flex-direction: column;
        }

        .radio-content strong {
            color: var(--text-primary);
            margin-bottom: 2px;
        }

        .radio-content span {
            color: var(--text-secondary);
            font-size: 13px;
        }

        .publish-summary {
            background: var(--bg-secondary);
            border: 1px solid var(--border-card);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 20px;
        }

        .publish-summary h4 {
            color: var(--text-primary);
            margin-bottom: 12px;
        }

        .summary-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid var(--border-card);
        }

        .summary-item:last-child {
            border-bottom: none;
        }

        .summary-item span {
            color: var(--text-secondary);
        }

        .summary-item strong {
            color: var(--tanda-cyan);
        }

        .form-navigation {
            display: flex;
            justify-content: space-between;
            gap: 16px;
            margin-top: 32px;
        }

        .btn-secondary,
        .btn-primary,
        .btn-primary-large {
            padding: 12px 24px;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-secondary {
            background: var(--bg-secondary);
            color: var(--text-primary);
            border: 1px solid var(--border-card);
        }

        .btn-secondary:hover {
            background: var(--bg-card);
            border-color: var(--border-accent);
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--tanda-cyan), var(--tanda-cyan-dark));
            color: var(--tanda-black);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 255, 255, 0.3);
        }

        .btn-primary-large {
            background: linear-gradient(135deg, var(--crypto-gold), #ffed4e);
            color: var(--tanda-black);
            padding: 16px 32px;
            font-size: 16px;
            width: 100%;
        }

        .btn-primary-large:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(255, 215, 0, 0.4);
        }

        /* Mobile Responsive for Modal */
        @media (max-width: 768px) {
            .sell-modal-content {
                width: 95%;
                max-height: 95vh;
            }
            
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .photo-upload-container {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .form-navigation {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <!-- Unified Header -->
    <div id="latanda-header" class="auto-header"></div>
    
    <!-- Page-specific Header Section with Return Button -->
    <div class="page-title-section" style="padding: 40px 20px 20px; text-align: center; position: relative;">
        <button onclick="window.location.href='home-dashboard.html'" class="back-button" style="position: absolute; left: 20px; top: 50%; transform: translateY(-50%); background: var(--bg-card); border: 1px solid var(--border-accent); border-radius: 12px; padding: 12px 16px; color: var(--tanda-cyan); text-decoration: none; display: flex; align-items: center; gap: 8px; cursor: pointer; transition: all 0.3s ease; backdrop-filter: blur(10px);">
            <i class="fas fa-arrow-left"></i>
            <span data-translate="nav.back">Regresar</span>
        </button>
        <h1 style="font-size: 36px; margin-bottom: 8px; color: var(--tanda-cyan); display: flex; align-items: center; justify-content: center; gap: 12px;">
            <i class="fas fa-store"></i>
            <span data-translate="marketplace.title">Marketplace Social</span>
        </h1>
        <p style="color: var(--text-secondary); font-size: 18px;" data-translate="marketplace.subtitle">Compra, vende e intercambia con la comunidad La Tanda</p>
    </div>

    <div class="marketplace-container">
        <!-- Main Navigation Tabs -->
        <div class="main-navigation">
            <div class="nav-tabs-container">
                <button class="main-tab active" data-tab="trending" onclick="switchMainTab('trending')">
                    <i class="fas fa-fire"></i>
                    <span>Trending</span>
                </button>
                <button class="main-tab" data-tab="productos" onclick="switchMainTab('productos')">
                    <i class="fas fa-shopping-bag"></i>
                    <span>Productos</span>
                </button>
                <button class="main-tab" data-tab="servicios" onclick="switchMainTab('servicios')">
                    <i class="fas fa-tools"></i>
                    <span>Servicios</span>
                </button>
                <button class="main-tab sell-tab" data-tab="vender" onclick="switchMainTab('vender')">
                    <i class="fas fa-plus-circle"></i>
                    <span>Vender</span>
                </button>
            </div>
        </div>

        <!-- TRENDING TAB -->
        <div id="trending-content" class="tab-content active">
            <div class="trending-section">
                <div class="trending-header">
                    <h2 class="trending-title">
                        <i class="fas fa-fire"></i> Trending en La Tanda
                    </h2>
                    <button class="view-all-btn" onclick="showAllTrending()">Ver Todo</button>
                </div>
                <div class="trending-items" id="trendingItems">
                    <!-- Will be populated by JavaScript -->
                </div>
            </div>
        </div>

        <!-- PRODUCTOS TAB -->
        <div id="productos-content" class="tab-content">
            <div class="products-section">
                <!-- Search and Filters -->
                <div class="search-filters-bar">
                    <div class="search-container">
                        <i class="fas fa-search search-icon"></i>
                        <input type="text" id="productSearch" placeholder="Buscar productos..." class="search-input">
                    </div>
                    <div class="filters-container">
                        <select id="categoryFilter" class="filter-select">
                            <option value="">üè∑Ô∏è Todas las categor√≠as</option>
                            <option value="electronics">üì± Electr√≥nicos</option>
                            <option value="clothing">üëï Ropa y Moda</option>
                            <option value="home">üè† Hogar</option>
                            <option value="gaming">üéÆ Gaming</option>
                            <option value="books">üìö Libros</option>
                            <option value="vehicles">üöó Veh√≠culos</option>
                        </select>
                        <select id="priceFilter" class="filter-select">
                            <option value="">üí∞ Cualquier precio</option>
                            <option value="0-50">0 - 50 LTD</option>
                            <option value="50-200">50 - 200 LTD</option>
                            <option value="200-500">200 - 500 LTD</option>
                            <option value="500+">500+ LTD</option>
                        </select>
                        <select id="ratingFilter" class="filter-select">
                            <option value="">‚≠ê Cualquier rating</option>
                            <option value="4+">‚≠ê‚≠ê‚≠ê‚≠ê 4+ estrellas</option>
                            <option value="3+">‚≠ê‚≠ê‚≠ê 3+ estrellas</option>
                        </select>
                    </div>
                </div>
                
                <!-- Products Grid -->
                <div class="products-grid" id="productsGrid">
                    <!-- Will be populated by JavaScript -->
                </div>
            </div>
        </div>

        <!-- SERVICIOS TAB -->
        <div id="servicios-content" class="tab-content">
            <div class="services-section">
                <!-- Search and Filters for Services -->
                <div class="search-filters-bar">
                    <div class="search-container">
                        <i class="fas fa-search search-icon"></i>
                        <input type="text" id="serviceSearch" placeholder="Buscar servicios..." class="search-input">
                    </div>
                    <div class="filters-container">
                        <select id="serviceTypeFilter" class="filter-select">
                            <option value="">‚öôÔ∏è Todos los servicios</option>
                            <option value="tech">üíª Tecnolog√≠a</option>
                            <option value="design">üé® Dise√±o</option>
                            <option value="cleaning">üßπ Limpieza</option>
                            <option value="education">üéì Educaci√≥n</option>
                            <option value="delivery">üöö Delivery</option>
                            <option value="consulting">üíº Consultor√≠a</option>
                        </select>
                        <select id="modalityFilter" class="filter-select">
                            <option value="">üìç Cualquier modalidad</option>
                            <option value="presencial">üè¢ Presencial</option>
                            <option value="remoto">üíª Remoto</option>
                            <option value="hibrido">üåê H√≠brido</option>
                        </select>
                    </div>
                </div>
                
                <!-- Services Grid -->
                <div class="services-grid" id="servicesGrid">
                    <!-- Will be populated by JavaScript -->
                </div>
            </div>
        </div>

        <!-- VENDER TAB -->
        <div id="vender-content" class="tab-content">
            <div class="sell-section">
                <div class="sell-header">
                    <h2>¬øQu√© quieres publicar?</h2>
                    <p>Elige el tipo de publicaci√≥n que deseas crear</p>
                </div>
                
                <div class="sell-options">
                    <button class="sell-option-card" onclick="showSellForm('product')">
                        <div class="sell-icon">üì¶</div>
                        <h3>PRODUCTO</h3>
                        <p>Art√≠culos f√≠sicos</p>
                    </button>
                    <button class="sell-option-card" onclick="showSellForm('service')">
                        <div class="sell-icon">‚öôÔ∏è</div>
                        <h3>SERVICIO</h3>
                        <p>Habilidades profesionales</p>
                    </button>
                    <button class="sell-option-card" onclick="showSellForm('course')">
                        <div class="sell-icon">üéì</div>
                        <h3>CURSO</h3>
                        <p>Ense√±anza online</p>
                    </button>
                </div>
            </div>
        </div>

        <!-- SELL PRODUCT MODAL -->
        <div id="sellProductModal" class="sell-modal" style="display: none;">
            <div class="sell-modal-overlay" onclick="closeSellModal()"></div>
            <div class="sell-modal-content">
                <div class="sell-modal-header">
                    <h2>üì¶ Vender Producto</h2>
                    <button class="close-modal-btn" onclick="closeSellModal()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <form id="sellProductForm" class="sell-form">
                    <!-- Step 1: Basic Info -->
                    <div class="form-step active" id="step1">
                        <div class="step-header">
                            <h3>üìù Informaci√≥n B√°sica</h3>
                            <div class="step-indicator">
                                <span class="step active">1</span>
                                <span class="step">2</span>
                                <span class="step">3</span>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="productTitle">T√≠tulo del Producto *</label>
                            <input type="text" id="productTitle" name="title" maxlength="60" required 
                                   placeholder="Ej: iPhone 13 Pro 256GB">
                            <span class="char-counter">0/60</span>
                        </div>
                        
                        <div class="form-group">
                            <label for="productCategory">Categor√≠a *</label>
                            <select id="productCategory" name="category" required>
                                <option value="">Selecciona una categor√≠a</option>
                                <option value="electronics">üì± Electr√≥nicos</option>
                                <option value="clothing">üëï Ropa y Moda</option>
                                <option value="home">üè† Hogar y Jard√≠n</option>
                                <option value="gaming">üéÆ Gaming</option>
                                <option value="books">üìö Libros y Revistas</option>
                                <option value="vehicles">üöó Veh√≠culos</option>
                                <option value="sports">‚öΩ Deportes</option>
                                <option value="music">üéµ M√∫sica</option>
                                <option value="other">üì¶ Otros</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="productDescription">Descripci√≥n *</label>
                            <textarea id="productDescription" name="description" maxlength="500" required 
                                      placeholder="Describe tu producto en detalle. Incluye estado, caracter√≠sticas especiales, raz√≥n de venta..."></textarea>
                            <span class="char-counter">0/500</span>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="productPrice">Precio *</label>
                                <div class="price-input-container">
                                    <input type="number" id="productPrice" name="price" min="1" step="0.01" required 
                                           placeholder="0.00">
                                    <span class="currency-label">LTD</span>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="productCondition">Condici√≥n *</label>
                                <select id="productCondition" name="condition" required>
                                    <option value="">Selecciona condici√≥n</option>
                                    <option value="new">‚ú® Nuevo</option>
                                    <option value="like-new">üåü Como Nuevo</option>
                                    <option value="good">üëç Buen Estado</option>
                                    <option value="fair">‚ö†Ô∏è Estado Regular</option>
                                    <option value="poor">üîß Necesita Reparaci√≥n</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-navigation">
                            <button type="button" class="btn-secondary" onclick="closeSellModal()">Cancelar</button>
                            <button type="button" class="btn-primary" onclick="nextStep(2)">Siguiente ‚Üí</button>
                        </div>
                    </div>
                    
                    <!-- Step 2: Photos and Location -->
                    <div class="form-step" id="step2">
                        <div class="step-header">
                            <h3>üì∏ Fotos y Ubicaci√≥n</h3>
                            <div class="step-indicator">
                                <span class="step completed">1</span>
                                <span class="step active">2</span>
                                <span class="step">3</span>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label>Fotos del Producto (M√°ximo 5)</label>
                            <div class="photo-upload-container">
                                <div class="photo-upload-slot" onclick="triggerFileUpload(0)">
                                    <i class="fas fa-camera"></i>
                                    <span>Foto Principal</span>
                                </div>
                                <div class="photo-upload-slot" onclick="triggerFileUpload(1)">
                                    <i class="fas fa-plus"></i>
                                    <span>Agregar</span>
                                </div>
                                <div class="photo-upload-slot" onclick="triggerFileUpload(2)">
                                    <i class="fas fa-plus"></i>
                                    <span>Agregar</span>
                                </div>
                                <div class="photo-upload-slot" onclick="triggerFileUpload(3)">
                                    <i class="fas fa-plus"></i>
                                    <span>Agregar</span>
                                </div>
                                <div class="photo-upload-slot" onclick="triggerFileUpload(4)">
                                    <i class="fas fa-plus"></i>
                                    <span>Agregar</span>
                                </div>
                            </div>
                            <input type="file" id="photoInput" multiple accept="image/*" style="display: none;" onchange="handlePhotoUpload(event)">
                            <p class="form-help">La primera foto ser√° la imagen principal. M√°ximo 5MB por foto.</p>
                        </div>
                        
                        <div class="form-group">
                            <label for="productLocation">Ubicaci√≥n (Opcional)</label>
                            <select id="productLocation" name="location">
                                <option value="">üìç Selecciona tu ubicaci√≥n</option>
                                <option value="tegucigalpa">Tegucigalpa</option>
                                <option value="san-pedro">San Pedro Sula</option>
                                <option value="la-ceiba">La Ceiba</option>
                                <option value="choluteca">Choluteca</option>
                                <option value="comayagua">Comayagua</option>
                                <option value="juticalpa">Juticalpa</option>
                                <option value="danli">Danl√≠</option>
                                <option value="siguatepeque">Siguatepeque</option>
                                <option value="other">Otra ciudad</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label class="checkbox-container">
                                <input type="checkbox" id="deliveryAvailable" name="delivery">
                                <span class="checkmark"></span>
                                üöö Ofrezco servicio de entrega (costo adicional)
                            </label>
                        </div>
                        
                        <div class="form-navigation">
                            <button type="button" class="btn-secondary" onclick="previousStep(1)">‚Üê Anterior</button>
                            <button type="button" class="btn-primary" onclick="nextStep(3)">Siguiente ‚Üí</button>
                        </div>
                    </div>
                    
                    <!-- Step 3: Price Options and Publish -->
                    <div class="form-step" id="step3">
                        <div class="step-header">
                            <h3>üí∞ Opciones de Venta</h3>
                            <div class="step-indicator">
                                <span class="step completed">1</span>
                                <span class="step completed">2</span>
                                <span class="step active">3</span>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label>Tipo de Precio</label>
                            <div class="radio-group">
                                <label class="radio-container">
                                    <input type="radio" name="priceType" value="fixed" checked>
                                    <span class="radio-checkmark"></span>
                                    <div class="radio-content">
                                        <strong>üíé Precio Fijo</strong>
                                        <span>El precio no es negociable</span>
                                    </div>
                                </label>
                                
                                <label class="radio-container">
                                    <input type="radio" name="priceType" value="negotiable">
                                    <span class="radio-checkmark"></span>
                                    <div class="radio-content">
                                        <strong>ü§ù Negociable</strong>
                                        <span>Acepto ofertas razonables</span>
                                    </div>
                                </label>
                                
                                <label class="radio-container">
                                    <input type="radio" name="priceType" value="auction">
                                    <span class="radio-checkmark"></span>
                                    <div class="radio-content">
                                        <strong>üè∑Ô∏è Subasta</strong>
                                        <span>Los usuarios pueden ofertar</span>
                                    </div>
                                </label>
                            </div>
                        </div>
                        
                        <div class="form-group" id="auctionOptions" style="display: none;">
                            <label for="startingPrice">Precio Inicial de Subasta</label>
                            <div class="price-input-container">
                                <input type="number" id="startingPrice" name="startingPrice" min="1" step="0.01" 
                                       placeholder="0.00">
                                <span class="currency-label">LTD</span>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label class="checkbox-container">
                                <input type="checkbox" id="acceptExchange" name="exchange">
                                <span class="checkmark"></span>
                                üîÑ Tambi√©n acepto intercambio por otros productos
                            </label>
                        </div>
                        
                        <div class="publish-summary">
                            <h4>üìã Resumen de Publicaci√≥n</h4>
                            <div class="summary-item">
                                <span>Costo de publicaci√≥n:</span>
                                <strong>5 LTD</strong>
                            </div>
                            <div class="summary-item">
                                <span>Duraci√≥n:</span>
                                <strong>30 d√≠as</strong>
                            </div>
                            <div class="summary-item">
                                <span>Renovaci√≥n autom√°tica:</span>
                                <strong>S√≠ (puedes cancelar)</strong>
                            </div>
                        </div>
                        
                        <div class="form-navigation">
                            <button type="button" class="btn-secondary" onclick="previousStep(2)">‚Üê Anterior</button>
                            <button type="submit" class="btn-primary-large">
                                üöÄ Publicar Producto - 5 LTD
                            </button>
                        </div>
                    </div>
                </form>
            </div>
        </div>

        <!-- SELL SERVICE MODAL -->
        <div id="sellServiceModal" class="sell-modal" style="display: none;">
            <div class="sell-modal-overlay" onclick="closeSellModal()"></div>
            <div class="sell-modal-content">
                <div class="sell-modal-header">
                    <h2>‚öôÔ∏è Ofrecer Servicio</h2>
                    <button class="close-modal-btn" onclick="closeSellModal()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="sell-modal-body">
                    <form id="sellServiceForm">
                        <!-- Step 1: Informaci√≥n B√°sica -->
                        <div id="serviceStep1" class="form-step active">
                            <div class="step-header">
                                <h3>üìù Informaci√≥n B√°sica</h3>
                                <div class="step-indicator">Paso 1 de 3</div>
                            </div>
                            <div class="form-group">
                                <label for="serviceTitle">T√≠tulo del Servicio*</label>
                                <input type="text" id="serviceTitle" name="serviceTitle" required maxlength="60" placeholder="ej. Dise√±o Gr√°fico Profesional">
                                <div class="char-counter">
                                    <span id="serviceTitleCounter">0</span>/60 caracteres
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="serviceCategory">Categor√≠a*</label>
                                <select id="serviceCategory" name="serviceCategory" required>
                                    <option value="">Seleccionar categor√≠a</option>
                                    <option value="design">Dise√±o y Creatividad</option>
                                    <option value="programming">Programaci√≥n y Tecnolog√≠a</option>
                                    <option value="marketing">Marketing Digital</option>
                                    <option value="writing">Redacci√≥n y Traducci√≥n</option>
                                    <option value="consulting">Consultor√≠a</option>
                                    <option value="education">Educaci√≥n y Tutor√≠a</option>
                                    <option value="business">Negocios</option>
                                    <option value="health">Salud y Bienestar</option>
                                    <option value="other">Otros</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="serviceDescription">Descripci√≥n del Servicio*</label>
                                <textarea id="serviceDescription" name="serviceDescription" required maxlength="500" rows="4" placeholder="Describe qu√© incluye tu servicio, tu experiencia y qu√© resultados puede esperar el cliente..."></textarea>
                                <div class="char-counter">
                                    <span id="serviceDescriptionCounter">0</span>/500 caracteres
                                </div>
                            </div>
                            <div class="form-navigation">
                                <button type="button" class="next-step-btn" onclick="nextServiceStep(1)">
                                    Siguiente <i class="fas fa-arrow-right"></i>
                                </button>
                            </div>
                        </div>

                        <!-- Step 2: Detalles del Servicio -->
                        <div id="serviceStep2" class="form-step">
                            <div class="step-header">
                                <h3>‚öôÔ∏è Detalles del Servicio</h3>
                                <div class="step-indicator">Paso 2 de 3</div>
                            </div>
                            <div class="form-group">
                                <label for="serviceExperience">Experiencia*</label>
                                <select id="serviceExperience" name="serviceExperience" required>
                                    <option value="">Seleccionar nivel</option>
                                    <option value="principiante">Principiante (0-1 a√±os)</option>
                                    <option value="intermedio">Intermedio (1-3 a√±os)</option>
                                    <option value="avanzado">Avanzado (3-5 a√±os)</option>
                                    <option value="experto">Experto (+5 a√±os)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="serviceModality">Modalidad*</label>
                                <select id="serviceModality" name="serviceModality" required>
                                    <option value="">Seleccionar modalidad</option>
                                    <option value="remoto">Remoto/Online</option>
                                    <option value="presencial">Presencial</option>
                                    <option value="hibrido">H√≠brido</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="serviceLocation">Ubicaci√≥n</label>
                                <input type="text" id="serviceLocation" name="serviceLocation" placeholder="Ciudad, Pa√≠s (si es presencial)">
                            </div>
                            <div class="form-group">
                                <label for="serviceDeliveryTime">Tiempo de Entrega*</label>
                                <input type="text" id="serviceDeliveryTime" name="serviceDeliveryTime" required placeholder="ej. 3 d√≠as, 1 semana, 2 semanas">
                            </div>
                            <div class="form-navigation">
                                <button type="button" class="prev-step-btn" onclick="prevServiceStep(2)">
                                    <i class="fas fa-arrow-left"></i> Anterior
                                </button>
                                <button type="button" class="next-step-btn" onclick="nextServiceStep(2)">
                                    Siguiente <i class="fas fa-arrow-right"></i>
                                </button>
                            </div>
                        </div>

                        <!-- Step 3: Precio y Publicaci√≥n -->
                        <div id="serviceStep3" class="form-step">
                            <div class="step-header">
                                <h3>üí∞ Precio y Publicaci√≥n</h3>
                                <div class="step-indicator">Paso 3 de 3</div>
                            </div>
                            <div class="form-group">
                                <label for="servicePrice">Precio Base*</label>
                                <input type="number" id="servicePrice" name="servicePrice" required min="1" placeholder="100">
                                <small>Precio en tokens LTD</small>
                            </div>
                            <div class="form-group">
                                <label for="servicePriceType">Tipo de Precio*</label>
                                <select id="servicePriceType" name="servicePriceType" required>
                                    <option value="por_proyecto">Por Proyecto</option>
                                    <option value="por_hora">Por Hora</option>
                                    <option value="mensual">Mensual</option>
                                    <option value="personalizado">Personalizado</option>
                                </select>
                            </div>
                            <div class="form-group checkbox-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="serviceRevisions" name="serviceRevisions">
                                    <span class="checkmark"></span>
                                    Incluyo revisiones ilimitadas
                                </label>
                            </div>
                            <div class="form-group checkbox-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="serviceUrgent" name="serviceUrgent">
                                    <span class="checkmark"></span>
                                    Disponible para trabajos urgentes (+50% precio)
                                </label>
                            </div>
                            <div class="form-navigation">
                                <button type="button" class="prev-step-btn" onclick="prevServiceStep(3)">
                                    <i class="fas fa-arrow-left"></i> Anterior
                                </button>
                                <button type="submit" class="publish-btn">
                                    üöÄ Publicar Servicio - 5 LTD
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- SELL COURSE MODAL -->
        <div id="sellCourseModal" class="sell-modal" style="display: none;">
            <div class="sell-modal-overlay" onclick="closeSellModal()"></div>
            <div class="sell-modal-content">
                <div class="sell-modal-header">
                    <h2>üéì Crear Curso</h2>
                    <button class="close-modal-btn" onclick="closeSellModal()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="sell-modal-body">
                    <form id="sellCourseForm">
                        <!-- Step 1: Informaci√≥n B√°sica -->
                        <div id="courseStep1" class="form-step active">
                            <div class="step-header">
                                <h3>üìö Informaci√≥n del Curso</h3>
                                <div class="step-indicator">Paso 1 de 3</div>
                            </div>
                            <div class="form-group">
                                <label for="courseTitle">T√≠tulo del Curso*</label>
                                <input type="text" id="courseTitle" name="courseTitle" required maxlength="80" placeholder="ej. Introducci√≥n a JavaScript para Principiantes">
                                <div class="char-counter">
                                    <span id="courseTitleCounter">0</span>/80 caracteres
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="courseCategory">Categor√≠a*</label>
                                <select id="courseCategory" name="courseCategory" required>
                                    <option value="">Seleccionar categor√≠a</option>
                                    <option value="programming">Programaci√≥n</option>
                                    <option value="design">Dise√±o</option>
                                    <option value="marketing">Marketing</option>
                                    <option value="business">Negocios</option>
                                    <option value="languages">Idiomas</option>
                                    <option value="photography">Fotograf√≠a</option>
                                    <option value="music">M√∫sica</option>
                                    <option value="fitness">Fitness y Salud</option>
                                    <option value="cooking">Cocina</option>
                                    <option value="other">Otros</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="courseDescription">Descripci√≥n del Curso*</label>
                                <textarea id="courseDescription" name="courseDescription" required maxlength="600" rows="5" placeholder="Describe qu√© aprender√°n los estudiantes, prerrequisitos, estructura del curso..."></textarea>
                                <div class="char-counter">
                                    <span id="courseDescriptionCounter">0</span>/600 caracteres
                                </div>
                            </div>
                            <div class="form-navigation">
                                <button type="button" class="next-step-btn" onclick="nextCourseStep(1)">
                                    Siguiente <i class="fas fa-arrow-right"></i>
                                </button>
                            </div>
                        </div>

                        <!-- Step 2: Estructura y Contenido -->
                        <div id="courseStep2" class="form-step">
                            <div class="step-header">
                                <h3>üìñ Estructura del Curso</h3>
                                <div class="step-indicator">Paso 2 de 3</div>
                            </div>
                            <div class="form-group">
                                <label for="courseLevel">Nivel*</label>
                                <select id="courseLevel" name="courseLevel" required>
                                    <option value="">Seleccionar nivel</option>
                                    <option value="principiante">Principiante</option>
                                    <option value="intermedio">Intermedio</option>
                                    <option value="avanzado">Avanzado</option>
                                    <option value="todos">Todos los niveles</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="courseDuration">Duraci√≥n Total*</label>
                                <input type="text" id="courseDuration" name="courseDuration" required placeholder="ej. 4 semanas, 20 horas">
                            </div>
                            <div class="form-group">
                                <label for="courseModules">N√∫mero de M√≥dulos/Lecciones*</label>
                                <input type="number" id="courseModules" name="courseModules" required min="1" placeholder="12">
                            </div>
                            <div class="form-group">
                                <label for="courseFormat">Formato*</label>
                                <select id="courseFormat" name="courseFormat" required>
                                    <option value="">Seleccionar formato</option>
                                    <option value="video">Solo Videos</option>
                                    <option value="live">Clases en Vivo</option>
                                    <option value="mixed">Videos + Live Sessions</option>
                                    <option value="text">Material Escrito</option>
                                    <option value="interactive">Interactivo/Pr√°ctico</option>
                                </select>
                            </div>
                            <div class="form-navigation">
                                <button type="button" class="prev-step-btn" onclick="prevCourseStep(2)">
                                    <i class="fas fa-arrow-left"></i> Anterior
                                </button>
                                <button type="button" class="next-step-btn" onclick="nextCourseStep(2)">
                                    Siguiente <i class="fas fa-arrow-right"></i>
                                </button>
                            </div>
                        </div>

                        <!-- Step 3: Precio y Publicaci√≥n -->
                        <div id="courseStep3" class="form-step">
                            <div class="step-header">
                                <h3>üí∞ Precio y Publicaci√≥n</h3>
                                <div class="step-indicator">Paso 3 de 3</div>
                            </div>
                            <div class="form-group">
                                <label for="coursePrice">Precio del Curso*</label>
                                <input type="number" id="coursePrice" name="coursePrice" required min="1" placeholder="250">
                                <small>Precio en tokens LTD</small>
                            </div>
                            <div class="form-group">
                                <label for="coursePriceType">Tipo de Acceso*</label>
                                <select id="coursePriceType" name="coursePriceType" required>
                                    <option value="lifetime">Acceso de por vida</option>
                                    <option value="subscription">Suscripci√≥n mensual</option>
                                    <option value="limited">Acceso por tiempo limitado</option>
                                </select>
                            </div>
                            <div class="form-group checkbox-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="courseCertificate" name="courseCertificate">
                                    <span class="checkmark"></span>
                                    Incluye certificado de finalizaci√≥n
                                </label>
                            </div>
                            <div class="form-group checkbox-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="courseSupport" name="courseSupport">
                                    <span class="checkmark"></span>
                                    Incluye soporte directo del instructor
                                </label>
                            </div>
                            <div class="form-group checkbox-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="courseMaterials" name="courseMaterials">
                                    <span class="checkmark"></span>
                                    Incluye materiales descargables
                                </label>
                            </div>
                            <div class="form-navigation">
                                <button type="button" class="prev-step-btn" onclick="prevCourseStep(3)">
                                    <i class="fas fa-arrow-left"></i> Anterior
                                </button>
                                <button type="submit" class="publish-btn">
                                    üöÄ Publicar Curso - 10 LTD
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
                <button class="tab-btn" onclick="switchTab('comercios')">
                    <i class="fas fa-store-alt"></i> Comercios
                </button>
                <button class="tab-btn" onclick="switchTab('ofertas')">
                    <i class="fas fa-percent"></i> Ofertas
                </button>
            </div>

            <!-- Productos Tab -->
            <div id="productos" class="tab-content active">
                <div class="marketplace-grid" id="productosGrid">
                    <!-- Products will be populated by JavaScript -->
                </div>
            </div>

            <!-- Servicios Tab -->
            <div id="servicios" class="tab-content">
                <div class="marketplace-grid" id="serviciosGrid">
                    <!-- Services will be populated by JavaScript -->
                </div>
            </div>

            <!-- Social Tab -->
            <div id="social" class="tab-content">
                <div class="social-feed" id="socialFeed">
                    <!-- Social posts will be populated by JavaScript -->
                </div>
            </div>

            <!-- Comercios Tab -->
            <div id="comercios" class="tab-content">
                <div class="marketplace-grid" id="comerciosGrid">
                    <!-- Businesses will be populated by JavaScript -->
                </div>
            </div>

            <!-- Ofertas Tab -->
            <div id="ofertas" class="tab-content">
                <div class="marketplace-grid" id="ofertasGrid">
                    <!-- Offers will be populated by JavaScript -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // Marketplace Social Manager
        class MarketplaceSocialManager {
            constructor() {
                this.currentTab = 'productos';
                this.init();
            }

            init() {
                this.loadTrendingItems();
                this.loadProducts();
                this.loadServices();
                this.loadSocialFeed();
                this.loadBusinesses();
                this.loadOffers();
                console.log('üõçÔ∏è Marketplace Social initialized');
            }

            loadTrendingItems() {
                const trendingData = [
                    { name: 'NFT Membership Gold', price: '2,500 LTD', change: '+15.2%', type: 'positive' },
                    { name: 'Servicios de Limpieza', price: '150 LTD/mes', change: '+8.7%', type: 'positive' },
                    { name: 'Productos Org√°nicos', price: '75 LTD', change: '+12.4%', type: 'positive' },
                    { name: 'Consultor√≠a Digital', price: '500 LTD/hr', change: '+5.1%', type: 'positive' },
                    { name: 'Clases de Idiomas', price: '200 LTD/mes', change: '+9.8%', type: 'positive' },
                    { name: 'Delivery Local', price: '25 LTD', change: '+22.3%', type: 'positive' }
                ];

                const container = document.getElementById('trendingItems');
                container.innerHTML = trendingData.map(item => `
                    <div class="trending-item">
                        <h4>${item.name}</h4>
                        <div class="price">${item.price}</div>
                        <div class="change ${item.type}">
                            <i class="fas fa-arrow-up"></i> ${item.change}
                        </div>
                    </div>
                `).join('');
            }

            loadProducts() {
                const products = [
                    {
                        title: 'Productos Org√°nicos Premium',
                        description: 'Frutas y verduras frescas directamente del productor local.',
                        image: 'fas fa-leaf',
                        badge: 'ORG√ÅNICO',
                        stats: { price: '75 LTD', rating: '4.9', sales: '156' },
                        seller: 'Granja Verde SA'
                    },
                    {
                        title: 'Artesan√≠as Locales',
                        description: 'Productos √∫nicos hechos a mano por artesanos de la comunidad.',
                        image: 'fas fa-palette',
                        badge: 'HECHO A MANO',
                        stats: { price: '120 LTD', rating: '4.8', sales: '89' },
                        seller: 'Artesanos Unidos'
                    },
                    {
                        title: 'Tecnolog√≠a Reacondicionada',
                        description: 'Dispositivos electr√≥nicos certificados con garant√≠a.',
                        image: 'fas fa-laptop',
                        badge: 'GARANT√çA',
                        stats: { price: '850 LTD', rating: '4.7', sales: '234' },
                        seller: 'TechSmart'
                    },
                    {
                        title: 'Ropa Sostenible',
                        description: 'Moda √©tica y sostenible con materiales reciclados.',
                        image: 'fas fa-tshirt',
                        badge: 'ECO',
                        stats: { price: '95 LTD', rating: '4.6', sales: '67' },
                        seller: 'EcoFashion'
                    }
                ];

                this.renderMarketplaceItems('productosGrid', products);
            }

            loadServices() {
                const services = [
                    {
                        title: 'Consultor√≠a Digital',
                        description: 'Asesor√≠a especializada en transformaci√≥n digital para tu negocio.',
                        image: 'fas fa-chart-line',
                        badge: 'EXPERTO',
                        stats: { price: '500 LTD/hr', rating: '5.0', reviews: '42' },
                        seller: 'DigitalPro Consulting'
                    },
                    {
                        title: 'Clases de Idiomas Online',
                        description: 'Aprende nuevos idiomas con profesores nativos certificados.',
                        image: 'fas fa-language',
                        badge: 'CERTIFICADO',
                        stats: { price: '200 LTD/mes', rating: '4.9', reviews: '128' },
                        seller: 'Language Masters'
                    },
                    {
                        title: 'Servicios de Limpieza',
                        description: 'Limpieza profesional para hogares y oficinas.',
                        image: 'fas fa-broom',
                        badge: 'PROFESIONAL',
                        stats: { price: '150 LTD/sesi√≥n', rating: '4.8', reviews: '95' },
                        seller: 'CleanPro Services'
                    },
                    {
                        title: 'Delivery R√°pido',
                        description: 'Servicio de entrega express dentro de la ciudad.',
                        image: 'fas fa-shipping-fast',
                        badge: 'EXPRESS',
                        stats: { price: '25 LTD/entrega', rating: '4.7', reviews: '312' },
                        seller: 'FastDelivery'
                    }
                ];

                this.renderMarketplaceItems('serviciosGrid', services);
            }

            loadSocialFeed() {
                const posts = [
                    {
                        user: 'Mar√≠a Gonz√°lez',
                        avatar: 'MG',
                        time: 'Hace 2 horas',
                        content: '¬°Excelente experiencia comprando productos org√°nicos en el marketplace! La calidad es incre√≠ble y el precio muy justo. #LaTandaMarketplace #Org√°nico',
                        likes: 24,
                        comments: 8,
                        shares: 3
                    },
                    {
                        user: 'Carlos Ruiz',
                        avatar: 'CR',
                        time: 'Hace 4 horas',
                        content: 'Recomiendo 100% los servicios de consultor√≠a digital. Me ayudaron a modernizar mi negocio y aumentar las ventas en un 40%. üöÄ',
                        likes: 18,
                        comments: 12,
                        shares: 7
                    },
                    {
                        user: 'Ana Mart√≠nez',
                        avatar: 'AM',
                        time: 'Hace 6 horas',
                        content: 'Las artesan√≠as locales son √∫nicas. Compr√© varios productos para regalar y todos quedaron encantados. Apoyen a nuestros artesanos locales! üé®',
                        likes: 31,
                        comments: 15,
                        shares: 9
                    },
                    {
                        user: 'Luis Fern√°ndez',
                        avatar: 'LF',
                        time: 'Hace 1 d√≠a',
                        content: 'El servicio de delivery es s√∫per r√°pido. Ped√≠ mi almuerzo y lleg√≥ en 20 minutos. Perfecto para d√≠as ocupados. ‚ö°',
                        likes: 22,
                        comments: 6,
                        shares: 4
                    }
                ];

                const container = document.getElementById('socialFeed');
                container.innerHTML = posts.map(post => `
                    <div class="social-post">
                        <div class="post-header">
                            <div class="user-avatar">${post.avatar}</div>
                            <div class="user-info">
                                <h4>${post.user}</h4>
                                <div class="post-time">${post.time}</div>
                            </div>
                        </div>
                        <div class="post-content">${post.content}</div>
                        <div class="post-actions">
                            <button class="action-btn">
                                <i class="fas fa-heart"></i> ${post.likes}
                            </button>
                            <button class="action-btn">
                                <i class="fas fa-comment"></i> ${post.comments}
                            </button>
                            <button class="action-btn">
                                <i class="fas fa-share"></i> ${post.shares}
                            </button>
                        </div>
                    </div>
                `).join('');
            }

            loadBusinesses() {
                const businesses = [
                    {
                        title: 'Restaurante La Tradici√≥n',
                        description: 'Comida tradicional hondure√±a con ingredientes frescos y locales.',
                        image: 'fas fa-utensils',
                        badge: 'TRADICIONAL',
                        stats: { rating: '4.9', reviews: '245', location: 'Centro' },
                        seller: 'Familia Rodr√≠guez'
                    },
                    {
                        title: 'Caf√© Los Andes',
                        description: 'Caf√© de especialidad 100% hondure√±o, tostado diariamente.',
                        image: 'fas fa-coffee',
                        badge: 'ESPECIALIDAD',
                        stats: { rating: '4.8', reviews: '178', location: 'Zona Rosa' },
                        seller: 'Cooperativa Cafetalera'
                    },
                    {
                        title: 'Farmacia Salud Plus',
                        description: 'Medicamentos y productos de salud con servicio 24/7.',
                        image: 'fas fa-pills',
                        badge: '24/7',
                        stats: { rating: '4.7', reviews: '156', location: 'Multiple' },
                        seller: 'Salud Plus SA'
                    },
                    {
                        title: 'Mec√°nica Experta',
                        description: 'Reparaci√≥n y mantenimiento automotriz con t√©cnicos certificados.',
                        image: 'fas fa-wrench',
                        badge: 'CERTIFICADO',
                        stats: { rating: '4.6', reviews: '89', location: 'Industrial' },
                        seller: 'AutoExpertos'
                    }
                ];

                this.renderBusinessItems('comerciosGrid', businesses);
            }

            loadOffers() {
                const offers = [
                    {
                        title: '50% OFF en Productos Org√°nicos',
                        description: 'Aprovecha esta oferta especial en toda nuestra l√≠nea org√°nica.',
                        image: 'fas fa-percentage',
                        badge: '50% OFF',
                        stats: { original: '150 LTD', price: '75 LTD', expires: '5 d√≠as' },
                        seller: 'Granja Verde SA'
                    },
                    {
                        title: 'Consultor√≠a Gratis',
                        description: 'Primera hora de consultor√≠a digital completamente gratis.',
                        image: 'fas fa-gift',
                        badge: 'GRATIS',
                        stats: { original: '500 LTD', price: '0 LTD', expires: '10 d√≠as' },
                        seller: 'DigitalPro'
                    },
                    {
                        title: '3x2 en Artesan√≠as',
                        description: 'Compra 2 artesan√≠as y ll√©vate la tercera sin costo adicional.',
                        image: 'fas fa-tags',
                        badge: '3X2',
                        stats: { original: '360 LTD', price: '240 LTD', expires: '7 d√≠as' },
                        seller: 'Artesanos Unidos'
                    },
                    {
                        title: 'Delivery Gratis',
                        description: 'Env√≠o gratuito en compras mayores a 200 LTD.',
                        image: 'fas fa-truck',
                        badge: 'ENV√çO GRATIS',
                        stats: { original: '25 LTD', price: '0 LTD', expires: '15 d√≠as' },
                        seller: 'FastDelivery'
                    }
                ];

                this.renderOfferItems('ofertasGrid', offers);
            }

            renderMarketplaceItems(containerId, items) {
                const container = document.getElementById(containerId);
                container.innerHTML = items.map(item => `
                    <div class="marketplace-item">
                        <div class="item-header">
                            <div class="item-badge">${item.badge}</div>
                        </div>
                        <div class="item-image">
                            <i class="${item.image}"></i>
                        </div>
                        <h3 class="item-title">${item.title}</h3>
                        <p class="item-description">${item.description}</p>
                        <div class="item-stats">
                            <div class="stat-item">
                                <div class="stat-value">${item.stats.price || item.stats.rating}</div>
                                <div class="stat-label">${item.stats.price ? 'Precio' : 'Rating'}</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value">${item.stats.rating || item.stats.sales}</div>
                                <div class="stat-label">${item.stats.rating ? 'Rating' : 'Ventas'}</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value">${item.stats.sales || item.stats.reviews}</div>
                                <div class="stat-label">${item.stats.sales ? 'Ventas' : 'Reviews'}</div>
                            </div>
                        </div>
                        <div class="item-actions">
                            <button class="btn-marketplace btn-primary" onclick="viewItem('${item.title}')">
                                <i class="fas fa-eye"></i> Ver Detalles
                            </button>
                            <button class="btn-marketplace btn-secondary" onclick="contactSeller('${item.seller}')">
                                <i class="fas fa-message"></i> Contactar
                            </button>
                        </div>
                    </div>
                `).join('');
            }

            renderBusinessItems(containerId, items) {
                const container = document.getElementById(containerId);
                container.innerHTML = items.map(item => `
                    <div class="marketplace-item">
                        <div class="item-header">
                            <div class="item-badge">${item.badge}</div>
                        </div>
                        <div class="item-image">
                            <i class="${item.image}"></i>
                        </div>
                        <h3 class="item-title">${item.title}</h3>
                        <p class="item-description">${item.description}</p>
                        <div class="item-stats">
                            <div class="stat-item">
                                <div class="stat-value">${item.stats.rating}</div>
                                <div class="stat-label">Rating</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value">${item.stats.reviews}</div>
                                <div class="stat-label">Reviews</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value">${item.stats.location}</div>
                                <div class="stat-label">Ubicaci√≥n</div>
                            </div>
                        </div>
                        <div class="item-actions">
                            <button class="btn-marketplace btn-primary" onclick="visitBusiness('${item.title}')">
                                <i class="fas fa-store"></i> Visitar
                            </button>
                            <button class="btn-marketplace btn-secondary" onclick="getDirections('${item.title}')">
                                <i class="fas fa-map-marker-alt"></i> Ubicaci√≥n
                            </button>
                        </div>
                    </div>
                `).join('');
            }

            renderOfferItems(containerId, items) {
                const container = document.getElementById(containerId);
                container.innerHTML = items.map(item => `
                    <div class="marketplace-item glow-effect">
                        <div class="item-header">
                            <div class="item-badge" style="background: rgba(255, 215, 0, 0.2); color: var(--crypto-gold);">${item.badge}</div>
                        </div>
                        <div class="item-image" style="background: linear-gradient(135deg, var(--crypto-gold), #e6c200);">
                            <i class="${item.image}"></i>
                        </div>
                        <h3 class="item-title">${item.title}</h3>
                        <p class="item-description">${item.description}</p>
                        <div class="item-stats">
                            <div class="stat-item">
                                <div class="stat-value" style="text-decoration: line-through; color: var(--text-secondary);">${item.stats.original}</div>
                                <div class="stat-label">Antes</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value" style="color: var(--crypto-gold);">${item.stats.price}</div>
                                <div class="stat-label">Ahora</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value">${item.stats.expires}</div>
                                <div class="stat-label">Expira</div>
                            </div>
                        </div>
                        <div class="item-actions">
                            <button class="btn-marketplace btn-primary" onclick="claimOffer('${item.title}')" style="background: linear-gradient(135deg, var(--crypto-gold), #e6c200);">
                                <i class="fas fa-bolt"></i> Reclamar Oferta
                            </button>
                        </div>
                    </div>
                `).join('');
            }
        }

        // Global functions
        function switchTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
            
            console.log(`Switched to tab: ${tabName}`);
        }

        function viewItem(itemName) {
            alert(`Ver detalles de: ${itemName}`);
        }

        function contactSeller(sellerName) {
            alert(`Contactar vendedor: ${sellerName}`);
        }

        function visitBusiness(businessName) {
            alert(`Visitar negocio: ${businessName}`);
        }

        function getDirections(businessName) {
            alert(`Obtener direcciones a: ${businessName}`);
        }

        function claimOffer(offerName) {
            alert(`Reclamar oferta: ${offerName}`);
        }

        // Initialize Enhanced Marketplace Manager when page loads
        let marketplaceManager;
        let enhancedMarketplace;
        document.addEventListener('DOMContentLoaded', () => {
            marketplaceManager = new MarketplaceSocialManager();
            enhancedMarketplace = new EnhancedMarketplaceManager();
            window.enhancedMarketplace = enhancedMarketplace;
        });

        // Enhanced Marketplace Manager
        class EnhancedMarketplaceManager {
            constructor() {
                this.currentTab = 'trending';
                this.products = [];
                this.services = [];
                this.init();
            }

            init() {
                this.generateSampleData();
                this.setupEventListeners();
                this.renderCurrentTab();
            }

            // Main Tab Switching
            switchMainTab(tabName) {
                // Update tab buttons
                document.querySelectorAll('.main-tab').forEach(tab => {
                    tab.classList.remove('active');
                });
                document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');

                // Update content
                document.querySelectorAll('.tab-content').forEach(content => {
                    content.classList.remove('active');
                });
                document.getElementById(`${tabName}-content`).classList.add('active');

                this.currentTab = tabName;
                this.renderCurrentTab();
            }

            renderCurrentTab() {
                switch(this.currentTab) {
                    case 'trending':
                        this.renderTrending();
                        break;
                    case 'productos':
                        this.renderProducts();
                        break;
                    case 'servicios':
                        this.renderServices();
                        break;
                    case 'vender':
                        // Already rendered in HTML
                        break;
                }
            }

            generateSampleData() {
                // Load user products from localStorage first
                const userProducts = JSON.parse(localStorage.getItem('latanda_user_products') || '[]');
                
                // Sample products
                this.products = [
                    {
                        id: 1,
                        title: 'iPhone 13 Pro',
                        price: 850,
                        seller: '@usuario123',
                        rating: 4.8,
                        reviews: 23,
                        category: 'electronics',
                        condition: 'Excelente estado',
                        image: '/api/placeholder/300/180'
                    },
                    {
                        id: 2,
                        title: 'Mesa de Roble',
                        price: 200,
                        seller: '@maria_v',
                        rating: 4.2,
                        reviews: 8,
                        category: 'home',
                        condition: 'Usado',
                        image: '/api/placeholder/300/180'
                    },
                    {
                        id: 3,
                        title: 'PlayStation 5',
                        price: 650,
                        seller: '@gamer_pro',
                        rating: 4.9,
                        reviews: 45,
                        category: 'gaming',
                        condition: 'Nuevo',
                        image: '/api/placeholder/300/180'
                    },
                    {
                        id: 4,
                        title: 'Laptop Gaming MSI',
                        price: 1200,
                        seller: '@tech_deals',
                        rating: 4.7,
                        reviews: 12,
                        category: 'electronics',
                        condition: 'Reacondicionado',
                        image: '/api/placeholder/300/180'
                    }
                ];

                // Add user products to the list with proper formatting
                userProducts.forEach(userProduct => {
                    this.products.push({
                        id: userProduct.id,
                        title: userProduct.title,
                        price: parseFloat(userProduct.price),
                        seller: '@tu_usuario',
                        rating: 5.0,
                        reviews: 0,
                        category: userProduct.category,
                        condition: userProduct.condition,
                        image: '/api/placeholder/300/180',
                        isUserProduct: true
                    });
                });

                // Load user services from localStorage
                const userServices = JSON.parse(localStorage.getItem('latanda_user_services') || '[]');

                // Sample services
                this.services = [
                    {
                        id: 1,
                        title: 'Desarrollo Web',
                        price: 50,
                        priceType: 'por hora',
                        provider: '@dev_pro',
                        rating: 4.9,
                        reviews: 45,
                        category: 'tech',
                        modality: 'remoto',
                        experience: '5 a√±os'
                    },
                    {
                        id: 2,
                        title: 'Limpieza Dom√©stica',
                        price: 80,
                        priceType: 'por servicio',
                        provider: '@clean_mx',
                        rating: 4.3,
                        reviews: 12,
                        category: 'cleaning',
                        modality: 'presencial',
                        experience: '3 a√±os'
                    },
                    {
                        id: 3,
                        title: 'Clases de Ingl√©s',
                        price: 25,
                        priceType: 'por hora',
                        provider: '@english_teacher',
                        rating: 4.8,
                        reviews: 67,
                        category: 'education',
                        modality: 'hibrido',
                        experience: '8 a√±os'
                    }
                ];

                // Add user services to the list with proper formatting
                userServices.forEach(userService => {
                    this.services.push({
                        id: userService.id,
                        title: userService.title,
                        price: parseFloat(userService.price),
                        priceType: userService.priceType,
                        provider: '@tu_usuario',
                        rating: 5.0,
                        reviews: 0,
                        modality: userService.modality,
                        experience: userService.experience,
                        isUserService: true
                    });
                });
            }

            renderTrending() {
                const container = document.getElementById('trendingItems');
                const trending = [...this.products, ...this.services].sort(() => Math.random() - 0.5).slice(0, 6);
                
                container.innerHTML = trending.map(item => `
                    <div class="trending-item" onclick="viewItem('${item.id}', '${item.title ? 'product' : 'service'}')">
                        <div class="trending-icon">${item.title ? 'üì±' : '‚öôÔ∏è'}</div>
                        <div class="trending-info">
                            <h4>${item.title}</h4>
                            <span class="trending-price">${item.price} LTD${item.priceType ? '/' + item.priceType : ''}</span>
                            <span class="trending-change positive">+${Math.floor(Math.random() * 20 + 5)}%</span>
                        </div>
                    </div>
                `).join('');
            }

            renderProducts() {
                const container = document.getElementById('productsGrid');
                container.innerHTML = this.products.map(product => `
                    <div class="product-card" onclick="viewProduct(${product.id})">
                        <div class="product-image">
                            <div style="width: 100%; height: 100%; background: linear-gradient(135deg, #1e293b, #0f172a); display: flex; align-items: center; justify-content: center; color: var(--text-secondary); font-size: 48px;">
                                ${this.getCategoryIcon(product.category)}
                            </div>
                        </div>
                        <div class="product-title">${product.title}</div>
                        <div class="product-price">${product.price} LTD</div>
                        <div class="product-seller">
                            <div class="seller-avatar">${product.seller[1].toUpperCase()}</div>
                            <span class="seller-name">${product.seller}</span>
                            <div class="rating-stars">
                                ${'‚≠ê'.repeat(Math.floor(product.rating))} (${product.reviews})
                            </div>
                        </div>
                        <div class="product-actions">
                            <button class="action-btn-primary">üõí Comprar</button>
                            <button class="action-btn-secondary">üí¨ Chat</button>
                        </div>
                    </div>
                `).join('');
            }

            renderServices() {
                const container = document.getElementById('servicesGrid');
                container.innerHTML = this.services.map(service => `
                    <div class="service-card" onclick="viewService(${service.id})">
                        <div class="service-title">${service.title}</div>
                        <div class="service-price">${service.price} LTD <span style="font-size: 14px; color: var(--text-secondary);">/${service.priceType}</span></div>
                        <div class="service-provider">
                            <div class="seller-avatar">${service.provider[1].toUpperCase()}</div>
                            <span class="seller-name">${service.provider}</span>
                            <div class="rating-stars">
                                ${'‚≠ê'.repeat(Math.floor(service.rating))} (${service.reviews})
                            </div>
                        </div>
                        <div class="service-details" style="margin-bottom: 12px; color: var(--text-secondary); font-size: 13px;">
                            üìç ${service.modality} ‚Ä¢ üéØ ${service.experience} experiencia
                        </div>
                        <div class="service-actions">
                            <button class="action-btn-primary">üìû Contactar</button>
                            <button class="action-btn-secondary">üìÖ Agendar</button>
                        </div>
                    </div>
                `).join('');
            }

            getCategoryIcon(category) {
                const icons = {
                    'electronics': 'üì±',
                    'home': 'üè†',
                    'gaming': 'üéÆ',
                    'clothing': 'üëï',
                    'books': 'üìö',
                    'vehicles': 'üöó'
                };
                return icons[category] || 'üì¶';
            }

            setupEventListeners() {
                // Search functionality
                ['productSearch', 'serviceSearch'].forEach(id => {
                    const searchInput = document.getElementById(id);
                    if (searchInput) {
                        searchInput.addEventListener('input', (e) => {
                            this.performSearch(e.target.value, id.includes('product') ? 'productos' : 'servicios');
                        });
                    }
                });

                // Filter functionality
                ['categoryFilter', 'priceFilter', 'ratingFilter', 'serviceTypeFilter', 'modalityFilter'].forEach(id => {
                    const filter = document.getElementById(id);
                    if (filter) {
                        filter.addEventListener('change', () => {
                            this.applyFilters();
                        });
                    }
                });
            }

            performSearch(query, type) {
                // TODO: Implement search functionality
                console.log(`Searching for "${query}" in ${type}`);
            }

            applyFilters() {
                // TODO: Implement filter functionality
                console.log('Applying filters...');
            }
        }

        // Global functions
        function switchMainTab(tabName) {
            if (window.enhancedMarketplace) {
                window.enhancedMarketplace.switchMainTab(tabName);
            }
        }

        function showAllTrending() {
            alert('Ver todos los productos trending - Funci√≥n expandida pr√≥ximamente');
        }

        // Sell Form Functions
        function showSellForm(type) {
            if (type === 'product') {
                document.getElementById('sellProductModal').style.display = 'flex';
                resetForm();
            } else if (type === 'service') {
                document.getElementById('sellServiceModal').style.display = 'flex';
                resetServiceForm();
            } else if (type === 'course') {
                document.getElementById('sellCourseModal').style.display = 'flex';
                resetCourseForm();
            }
        }

        function closeSellModal() {
            document.getElementById('sellProductModal').style.display = 'none';
            document.getElementById('sellServiceModal').style.display = 'none';
            document.getElementById('sellCourseModal').style.display = 'none';
            resetForm();
            resetServiceForm();
            resetCourseForm();
        }

        function resetForm() {
            document.getElementById('sellProductForm').reset();
            // Reset steps
            document.querySelectorAll('.form-step').forEach(step => step.classList.remove('active'));
            document.getElementById('step1').classList.add('active');
            // Reset step indicators
            document.querySelectorAll('.step').forEach((step, index) => {
                step.classList.remove('active', 'completed');
                if (index === 0) step.classList.add('active');
            });
            // Reset char counters
            updateCharCounter('productTitle', 60);
            updateCharCounter('productDescription', 500);
            // Reset photos
            document.querySelectorAll('.photo-upload-slot').forEach((slot, index) => {
                slot.innerHTML = index === 0 ? 
                    '<i class="fas fa-camera"></i><span>Foto Principal</span>' :
                    '<i class="fas fa-plus"></i><span>Agregar</span>';
            });
        }

        function nextStep(stepNumber) {
            // Validate current step
            if (!validateCurrentStep(stepNumber - 1)) {
                return;
            }

            // Hide current step
            document.querySelectorAll('.form-step').forEach(step => step.classList.remove('active'));
            document.getElementById('step' + stepNumber).classList.add('active');

            // Update step indicators
            document.querySelectorAll('.step').forEach((step, index) => {
                step.classList.remove('active');
                if (index < stepNumber - 1) {
                    step.classList.add('completed');
                } else if (index === stepNumber - 1) {
                    step.classList.add('active');
                }
            });
        }

        function previousStep(stepNumber) {
            // Hide current step
            document.querySelectorAll('.form-step').forEach(step => step.classList.remove('active'));
            document.getElementById('step' + stepNumber).classList.add('active');

            // Update step indicators
            document.querySelectorAll('.step').forEach((step, index) => {
                step.classList.remove('active', 'completed');
                if (index < stepNumber - 1) {
                    step.classList.add('completed');
                } else if (index === stepNumber - 1) {
                    step.classList.add('active');
                }
            });
        }

        function validateCurrentStep(stepNumber) {
            const step = document.getElementById('step' + (stepNumber + 1));
            const requiredFields = step.querySelectorAll('[required]');
            let isValid = true;

            requiredFields.forEach(field => {
                if (!field.value.trim()) {
                    field.style.borderColor = 'var(--error-color)';
                    isValid = false;
                } else {
                    field.style.borderColor = 'var(--border-card)';
                }
            });

            if (!isValid) {
                alert('Por favor completa todos los campos obligatorios');
            }

            return isValid;
        }

        function updateCharCounter(fieldId, maxLength) {
            const field = document.getElementById(fieldId);
            const counter = field.nextElementSibling;
            if (counter && counter.classList.contains('char-counter')) {
                const currentLength = field.value.length;
                counter.textContent = `${currentLength}/${maxLength}`;
                counter.style.color = currentLength > maxLength * 0.9 ? 'var(--warning-color)' : 'var(--text-secondary)';
            }
        }

        function triggerFileUpload(index) {
            window.selectedPhotoIndex = index;
            document.getElementById('photoInput').click();
        }

        function handlePhotoUpload(event) {
            const files = event.target.files;
            const index = window.selectedPhotoIndex || 0;
            
            if (files.length > 0) {
                const file = files[0];
                if (file.size > 5 * 1024 * 1024) { // 5MB limit
                    alert('La imagen es muy grande. M√°ximo 5MB por foto.');
                    return;
                }
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    const slot = document.querySelectorAll('.photo-upload-slot')[index];
                    slot.innerHTML = `<img src="${e.target.result}" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">`;
                    slot.style.border = '2px solid var(--success-color)';
                };
                reader.readAsDataURL(file);
            }
        }

        // Form submission
        document.addEventListener('DOMContentLoaded', function() {
            // Character counters
            document.getElementById('productTitle').addEventListener('input', () => updateCharCounter('productTitle', 60));
            document.getElementById('productDescription').addEventListener('input', () => updateCharCounter('productDescription', 500));
            
            // Price type radio buttons
            document.querySelectorAll('input[name="priceType"]').forEach(radio => {
                radio.addEventListener('change', function() {
                    const auctionOptions = document.getElementById('auctionOptions');
                    if (this.value === 'auction') {
                        auctionOptions.style.display = 'block';
                    } else {
                        auctionOptions.style.display = 'none';
                    }
                });
            });

            // Form submission
            document.getElementById('sellProductForm').addEventListener('submit', function(e) {
                e.preventDefault();
                handleProductSubmission();
            });

            // Service form handlers
            if (document.getElementById('sellServiceForm')) {
                document.getElementById('sellServiceForm').addEventListener('submit', function(e) {
                    e.preventDefault();
                    handleServiceSubmission();
                });

                // Character counters for service form
                document.getElementById('serviceTitle').addEventListener('input', function() {
                    document.getElementById('serviceTitleCounter').textContent = this.value.length;
                });

                document.getElementById('serviceDescription').addEventListener('input', function() {
                    document.getElementById('serviceDescriptionCounter').textContent = this.value.length;
                });
            }

            // Course form handlers
            if (document.getElementById('sellCourseForm')) {
                document.getElementById('sellCourseForm').addEventListener('submit', function(e) {
                    e.preventDefault();
                    handleCourseSubmission();
                });

                // Character counters for course form
                document.getElementById('courseTitle').addEventListener('input', function() {
                    document.getElementById('courseTitleCounter').textContent = this.value.length;
                });

                document.getElementById('courseDescription').addEventListener('input', function() {
                    document.getElementById('courseDescriptionCounter').textContent = this.value.length;
                });
            }
        });

        function handleProductSubmission() {
            // Collect form data
            const formData = {
                title: document.getElementById('productTitle').value,
                category: document.getElementById('productCategory').value,
                description: document.getElementById('productDescription').value,
                price: document.getElementById('productPrice').value,
                condition: document.getElementById('productCondition').value,
                location: document.getElementById('productLocation').value,
                delivery: document.getElementById('deliveryAvailable').checked,
                priceType: document.querySelector('input[name="priceType"]:checked').value,
                startingPrice: document.getElementById('startingPrice').value,
                exchange: document.getElementById('acceptExchange').checked,
                timestamp: new Date().toISOString()
            };

            // Store in localStorage (temporary solution)
            const existingProducts = JSON.parse(localStorage.getItem('latanda_user_products') || '[]');
            formData.id = Date.now();
            existingProducts.push(formData);
            localStorage.setItem('latanda_user_products', JSON.stringify(existingProducts));

            // Add to marketplace products
            if (window.enhancedMarketplace) {
                window.enhancedMarketplace.products.push({
                    id: formData.id,
                    title: formData.title,
                    price: parseFloat(formData.price),
                    seller: '@tu_usuario',
                    rating: 0,
                    reviews: 0,
                    category: formData.category,
                    condition: formData.condition,
                    image: '/api/placeholder/300/180'
                });
                
                // Refresh products view if currently active
                if (window.enhancedMarketplace.currentTab === 'productos') {
                    window.enhancedMarketplace.renderProducts();
                }
            }

            // Show success message
            alert('üéâ ¬°Producto publicado exitosamente!\n\nTu producto aparecer√° en el marketplace y otros usuarios podr√°n verlo y contactarte.');

            // Close modal
            closeSellModal();

            // Switch to products tab to show the new product
            if (window.enhancedMarketplace) {
                window.enhancedMarketplace.switchMainTab('productos');
            }
        }

        function handleServiceSubmission() {
            // Collect service form data
            const formData = {
                title: document.getElementById('serviceTitle').value,
                category: document.getElementById('serviceCategory').value,
                description: document.getElementById('serviceDescription').value,
                experience: document.getElementById('serviceExperience').value,
                modality: document.getElementById('serviceModality').value,
                location: document.getElementById('serviceLocation').value,
                deliveryTime: document.getElementById('serviceDeliveryTime').value,
                price: document.getElementById('servicePrice').value,
                priceType: document.getElementById('servicePriceType').value,
                revisions: document.getElementById('serviceRevisions').checked,
                urgent: document.getElementById('serviceUrgent').checked,
                timestamp: new Date().toISOString(),
                type: 'service'
            };

            // Store in localStorage
            const existingServices = JSON.parse(localStorage.getItem('latanda_user_services') || '[]');
            formData.id = Date.now();
            existingServices.push(formData);
            localStorage.setItem('latanda_user_services', JSON.stringify(existingServices));

            // Add to marketplace services
            if (window.enhancedMarketplace) {
                window.enhancedMarketplace.services.push({
                    id: formData.id,
                    title: formData.title,
                    price: parseFloat(formData.price),
                    priceType: formData.priceType,
                    provider: '@tu_usuario',
                    rating: 5.0,
                    reviews: 0,
                    modality: formData.modality,
                    experience: formData.experience
                });

                // Refresh services view if currently active
                if (window.enhancedMarketplace.currentTab === 'servicios') {
                    window.enhancedMarketplace.renderServices();
                }
            }

            // Show success message
            alert('üéâ ¬°Servicio publicado exitosamente!\n\nTu servicio aparecer√° en el marketplace y otros usuarios podr√°n contactarte.');

            // Close modal and switch to services tab
            closeSellModal();
            if (window.enhancedMarketplace) {
                window.enhancedMarketplace.switchMainTab('servicios');
            }
        }

        function handleCourseSubmission() {
            // Collect course form data
            const formData = {
                title: document.getElementById('courseTitle').value,
                category: document.getElementById('courseCategory').value,
                description: document.getElementById('courseDescription').value,
                level: document.getElementById('courseLevel').value,
                duration: document.getElementById('courseDuration').value,
                modules: document.getElementById('courseModules').value,
                format: document.getElementById('courseFormat').value,
                price: document.getElementById('coursePrice').value,
                priceType: document.getElementById('coursePriceType').value,
                certificate: document.getElementById('courseCertificate').checked,
                support: document.getElementById('courseSupport').checked,
                materials: document.getElementById('courseMaterials').checked,
                timestamp: new Date().toISOString(),
                type: 'course'
            };

            // Store in localStorage
            const existingCourses = JSON.parse(localStorage.getItem('latanda_user_courses') || '[]');
            formData.id = Date.now();
            existingCourses.push(formData);
            localStorage.setItem('latanda_user_courses', JSON.stringify(existingCourses));

            // Show success message
            alert('üéâ ¬°Curso creado exitosamente!\n\nTu curso aparecer√° en el marketplace y usuarios podr√°n inscribirse.');

            // Close modal
            closeSellModal();
            
            // Note: For now courses will be shown in a future "Cursos" tab
            alert('üìö Los cursos aparecer√°n en la secci√≥n "Cursos" que se habilitar√° pr√≥ximamente.');
        }
        
        // SERVICE FORM FUNCTIONS
        function resetServiceForm() {
            if (document.getElementById('sellServiceForm')) {
                document.getElementById('sellServiceForm').reset();
                // Reset steps
                document.querySelectorAll('#sellServiceModal .form-step').forEach(step => step.classList.remove('active'));
                document.getElementById('serviceStep1').classList.add('active');
                // Reset character counters
                document.getElementById('serviceTitleCounter').textContent = '0';
                document.getElementById('serviceDescriptionCounter').textContent = '0';
            }
        }

        function nextServiceStep(currentStep) {
            const current = document.getElementById(`serviceStep${currentStep}`);
            const next = document.getElementById(`serviceStep${currentStep + 1}`);
            
            // Validate current step
            const inputs = current.querySelectorAll('input[required], select[required], textarea[required]');
            let isValid = true;
            
            inputs.forEach(input => {
                if (!input.value.trim()) {
                    isValid = false;
                    input.style.borderColor = '#ef4444';
                } else {
                    input.style.borderColor = '';
                }
            });
            
            if (isValid && next) {
                current.classList.remove('active');
                next.classList.add('active');
            }
        }

        function prevServiceStep(currentStep) {
            const current = document.getElementById(`serviceStep${currentStep}`);
            const prev = document.getElementById(`serviceStep${currentStep - 1}`);
            
            if (prev) {
                current.classList.remove('active');
                prev.classList.add('active');
            }
        }

        // COURSE FORM FUNCTIONS
        function resetCourseForm() {
            if (document.getElementById('sellCourseForm')) {
                document.getElementById('sellCourseForm').reset();
                // Reset steps
                document.querySelectorAll('#sellCourseModal .form-step').forEach(step => step.classList.remove('active'));
                document.getElementById('courseStep1').classList.add('active');
                // Reset character counters
                document.getElementById('courseTitleCounter').textContent = '0';
                document.getElementById('courseDescriptionCounter').textContent = '0';
            }
        }

        function nextCourseStep(currentStep) {
            const current = document.getElementById(`courseStep${currentStep}`);
            const next = document.getElementById(`courseStep${currentStep + 1}`);
            
            // Validate current step
            const inputs = current.querySelectorAll('input[required], select[required], textarea[required]');
            let isValid = true;
            
            inputs.forEach(input => {
                if (!input.value.trim()) {
                    isValid = false;
                    input.style.borderColor = '#ef4444';
                } else {
                    input.style.borderColor = '';
                }
            });
            
            if (isValid && next) {
                current.classList.remove('active');
                next.classList.add('active');
            }
        }

        function prevCourseStep(currentStep) {
            const current = document.getElementById(`courseStep${currentStep}`);
            const prev = document.getElementById(`courseStep${currentStep - 1}`);
            
            if (prev) {
                current.classList.remove('active');
                prev.classList.add('active');
            }
        }

        function viewProduct(id) {
            alert(`Ver detalles del producto ${id} - Por implementar`);
        }

        function viewService(id) {
            alert(`Ver detalles del servicio ${id} - Por implementar`);
        }

        function viewItem(id, type) {
            alert(`Ver ${type} ${id} - Por implementar`);
        }
    </script>
    
    <!-- Shared Components and Translation System Scripts -->
    <script type="module" src="shared-components.js"></script>
    <script type="module" src="translation-system-design.js"></script>
    <script>
        // Initialize Translation System for Marketplace
        document.addEventListener('DOMContentLoaded', async function() {
            try {
                if (window.LaTandaTranslationSystem) {
                    const translationSystem = new LaTandaTranslationSystem();
                    await translationSystem.setupLanguageSelector();
                    await translationSystem.translatePage();
                    
                    // Force refresh translation after 1 second to ensure updates
                    setTimeout(async () => {
                        await translationSystem.translatePage();
                        console.log('üîÑ Forced translation refresh for marketplace');
                    }, 1000);
                } else {
                    // Fallback: Set text directly if translation system fails
                    setTimeout(() => {
                        const subtitleElement = document.querySelector('[data-translate="marketplace.subtitle"]');
                        if (subtitleElement && subtitleElement.textContent.includes('marketplace.subtitle')) {
                            subtitleElement.textContent = 'Compra, vende e intercambia con la comunidad La Tanda';
                            console.log('üîÑ Applied fallback translation for subtitle');
                        }
                    }, 500);
                }
            } catch (error) {
                console.error('Translation system not available:', error);
                // Emergency fallback
                setTimeout(() => {
                    const subtitleElement = document.querySelector('[data-translate="marketplace.subtitle"]');
                    if (subtitleElement) {
                        subtitleElement.textContent = 'Compra, vende e intercambia con la comunidad La Tanda';
                        console.log('üö® Emergency fallback translation applied');
                    }
                }, 500);
            }
        });
    </script>
    
    <!-- Unified Footer -->
    <div id="latanda-footer" class="auto-footer"></div>
</body>
</html>
