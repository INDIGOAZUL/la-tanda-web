{
  "openapi": "3.0.3",
  "info": {
    "title": "La Tanda API",
    "version": "4.7.0",
    "description": "API completa de La Tanda — Plataforma fintech y social para tandas de ahorro rotativo, marketplace de servicios y productos, sistema de lotería predictiva, y más.\n\n**Base URL:** `https://latanda.online`\n\n**Autenticación:** Bearer JWT token en header `Authorization: Bearer <token>`\n\n**Formato de respuesta:**\n```json\n{\n  \"success\": true,\n  \"data\": { ... },\n  \"message\": \"...\"\n}\n```\n\n**Revocación de tokens:** Los tokens son invalidados al cerrar sesión (`POST /api/auth/logout`) o cambiar contraseña. Un token revocado recibe `401 Token ha sido revocado` en cualquier endpoint protegido.",
    "contact": {
      "name": "INDIGOAZUL Development",
      "url": "https://latanda.online",
      "email": "dev@latanda.online"
    }
  },
  "servers": [
    {
      "url": "https://latanda.online",
      "description": "Production"
    }
  ],
  "tags": [
    {
      "name": "Auth",
      "description": "Autenticación, registro, verificación de email, reset de contraseña, WebAuthn"
    },
    {
      "name": "User",
      "description": "Perfil de usuario, configuración, 2FA, dispositivos, logros"
    },
    {
      "name": "Wallet",
      "description": "Balance, depósitos, retiros, historial de transacciones, PIN"
    },
    {
      "name": "Groups",
      "description": "Grupos de ahorro, membresías, roles, distribuciones, calendario"
    },
    {
      "name": "Tandas",
      "description": "Tandas de ahorro rotativo, posiciones, pagos, turnos"
    },
    {
      "name": "Contributions",
      "description": "Contribuciones a grupos, comprobantes, verificación"
    },
    {
      "name": "Social Feed",
      "description": "Publicaciones, comentarios, likes, bookmarks, follows, encuestas"
    },
    {
      "name": "Marketplace - Services",
      "description": "Servicios del marketplace, categorías, búsqueda"
    },
    {
      "name": "Marketplace - Products",
      "description": "Productos del marketplace, inventario, órdenes"
    },
    {
      "name": "Marketplace - Providers",
      "description": "Vendedores/proveedores, tiendas, reseñas"
    },
    {
      "name": "Marketplace - Portfolio",
      "description": "Portafolio profesional / CV maker, descarga PDF"
    },
    {
      "name": "Marketplace - Bookings",
      "description": "Reservas de servicios, estados, reviews"
    },
    {
      "name": "Lottery",
      "description": "Lotería predictiva de Honduras, estadísticas, jaladores, predicciones ML"
    },
    {
      "name": "MIA AI",
      "description": "Asistente IA MIA"
    },
    {
      "name": "Notifications",
      "description": "Notificaciones push, preferencias, suscripciones VAPID"
    },
    {
      "name": "Public",
      "description": "Endpoints públicos sin autenticación"
    }
  ],
  "components": {
    "securitySchemes": {
      "BearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT",
        "description": "JWT token obtenido de /api/auth/login. Los tokens son revocados al cerrar sesión o cambiar contraseña; un token revocado retorna 401."
      }
    },
    "schemas": {
      "SuccessResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "data": {
            "type": "object"
          },
          "message": {
            "type": "string"
          }
        }
      },
      "ErrorResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": false
          },
          "error": {
            "type": "string",
            "example": "Error interno del servidor"
          }
        }
      },
      "User": {
        "type": "object",
        "properties": {
          "user_id": {
            "type": "string",
            "example": "user_a1b2c3d4e5f6g7h8"
          },
          "name": {
            "type": "string",
            "example": "María López"
          },
          "email": {
            "type": "string",
            "format": "email"
          },
          "handle": {
            "type": "string",
            "example": "maria-lopez"
          },
          "avatar_url": {
            "type": "string",
            "nullable": true
          },
          "phone": {
            "type": "string",
            "nullable": true
          },
          "role": {
            "type": "string",
            "enum": [
              "user",
              "admin"
            ]
          },
          "email_verified": {
            "type": "boolean"
          },
          "verification_level": {
            "type": "string",
            "enum": [
              "basic",
              "verified",
              "premium"
            ]
          },
          "created_at": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "Provider": {
        "type": "object",
        "properties": {
          "provider_id": {
            "type": "integer"
          },
          "user_id": {
            "type": "string"
          },
          "business_name": {
            "type": "string",
            "example": "Mi Negocio HN"
          },
          "description": {
            "type": "string"
          },
          "shop_type": {
            "type": "string",
            "enum": [
              "services",
              "products",
              "mixed"
            ]
          },
          "store_layout": {
            "type": "string",
            "enum": [
              "classic",
              "showcase",
              "compact"
            ]
          },
          "store_theme": {
            "type": "string",
            "enum": [
              "dark",
              "cyan",
              "gold",
              "green",
              "coral",
              "purple"
            ]
          },
          "phone": {
            "type": "string",
            "nullable": true
          },
          "whatsapp": {
            "type": "string",
            "nullable": true
          },
          "email": {
            "type": "string",
            "nullable": true
          },
          "city": {
            "type": "string"
          },
          "neighborhood": {
            "type": "string",
            "nullable": true
          },
          "service_areas": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "social_links": {
            "type": "object",
            "properties": {
              "github": {
                "type": "string"
              },
              "linkedin": {
                "type": "string"
              },
              "website": {
                "type": "string"
              }
            }
          },
          "is_verified": {
            "type": "boolean"
          },
          "status": {
            "type": "string",
            "enum": [
              "active",
              "pending",
              "inactive"
            ]
          },
          "avg_rating": {
            "type": "number"
          },
          "total_reviews": {
            "type": "integer"
          },
          "completed_jobs": {
            "type": "integer"
          },
          "response_rate": {
            "type": "integer"
          }
        }
      },
      "Service": {
        "type": "object",
        "properties": {
          "service_id": {
            "type": "integer"
          },
          "title": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "price": {
            "type": "number"
          },
          "price_type": {
            "type": "string",
            "enum": [
              "fixed",
              "hourly",
              "quote"
            ]
          },
          "currency": {
            "type": "string",
            "enum": [
              "HNL",
              "USD",
              "LTD"
            ]
          },
          "category_id": {
            "type": "integer"
          },
          "images": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "status": {
            "type": "string"
          }
        }
      },
      "Product": {
        "type": "object",
        "properties": {
          "product_id": {
            "type": "integer"
          },
          "title": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "price": {
            "type": "number"
          },
          "currency": {
            "type": "string",
            "enum": [
              "HNL",
              "USD",
              "LTD"
            ]
          },
          "quantity": {
            "type": "integer"
          },
          "images": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "featured": {
            "type": "boolean"
          },
          "display_order": {
            "type": "integer"
          }
        }
      },
      "Group": {
        "type": "object",
        "properties": {
          "group_id": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "category": {
            "type": "string"
          },
          "max_members": {
            "type": "integer"
          },
          "contribution_amount": {
            "type": "number"
          },
          "frequency": {
            "type": "string"
          },
          "status": {
            "type": "string"
          },
          "created_by": {
            "type": "string"
          }
        }
      },
      "Portfolio": {
        "type": "object",
        "properties": {
          "portfolio_id": {
            "type": "integer"
          },
          "user_id": {
            "type": "string"
          },
          "full_name": {
            "type": "string",
            "description": "Siempre resuelto del perfil del usuario (no editable)"
          },
          "professional_title": {
            "type": "string",
            "nullable": true
          },
          "summary": {
            "type": "string",
            "nullable": true
          },
          "experience": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "company": {
                  "type": "string"
                },
                "position": {
                  "type": "string"
                },
                "start_date": {
                  "type": "string"
                },
                "end_date": {
                  "type": "string",
                  "nullable": true
                },
                "current": {
                  "type": "boolean"
                },
                "description": {
                  "type": "string"
                }
              }
            }
          },
          "education": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "institution": {
                  "type": "string"
                },
                "degree": {
                  "type": "string"
                },
                "field": {
                  "type": "string"
                },
                "start_year": {
                  "type": "integer"
                },
                "end_year": {
                  "type": "integer",
                  "nullable": true
                }
              }
            }
          },
          "skills": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "name": {
                  "type": "string"
                },
                "level": {
                  "type": "string",
                  "enum": [
                    "basico",
                    "intermedio",
                    "avanzado",
                    "experto"
                  ]
                }
              }
            }
          },
          "certifications": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "name": {
                  "type": "string"
                },
                "issuer": {
                  "type": "string"
                },
                "year": {
                  "type": "integer"
                },
                "url": {
                  "type": "string",
                  "nullable": true
                }
              }
            }
          },
          "projects": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "title": {
                  "type": "string"
                },
                "description": {
                  "type": "string"
                },
                "url": {
                  "type": "string",
                  "nullable": true
                }
              }
            }
          },
          "languages": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "language": {
                  "type": "string"
                },
                "level": {
                  "type": "string",
                  "enum": [
                    "basico",
                    "intermedio",
                    "avanzado",
                    "nativo"
                  ]
                }
              }
            }
          },
          "allow_downloads": {
            "type": "boolean"
          },
          "is_public": {
            "type": "boolean"
          }
        }
      },
      "Pagination": {
        "type": "object",
        "properties": {
          "limit": {
            "type": "integer"
          },
          "offset": {
            "type": "integer"
          },
          "total": {
            "type": "integer"
          }
        }
      },
      "Deposit": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "example": "dep_bank_1708300000000_abc123"
          },
          "user_id": {
            "type": "string"
          },
          "type": {
            "type": "string",
            "enum": [
              "bank_transfer",
              "crypto",
              "mobile_payment"
            ],
            "description": "Tipo de depósito"
          },
          "status": {
            "type": "string",
            "enum": [
              "pending_transfer",
              "receipt_uploaded",
              "processing",
              "confirmed",
              "failed",
              "cancelled",
              "expired"
            ],
            "description": "Estado actual del depósito"
          },
          "amount": {
            "type": "number",
            "example": 500.0
          },
          "net_amount": {
            "type": "number",
            "description": "Monto neto después de comisión",
            "example": 487.5
          },
          "transaction_fee": {
            "type": "number",
            "description": "Comisión cobrada",
            "example": 12.5
          },
          "currency": {
            "type": "string",
            "example": "HNL"
          },
          "reference_number": {
            "type": "string",
            "nullable": true
          },
          "bank_name": {
            "type": "string",
            "nullable": true,
            "description": "Solo para tipo bank_transfer"
          },
          "crypto_currency": {
            "type": "string",
            "nullable": true,
            "description": "Solo para tipo crypto"
          },
          "deposit_address": {
            "type": "string",
            "nullable": true,
            "description": "Dirección crypto generada"
          },
          "carrier": {
            "type": "string",
            "nullable": true,
            "description": "Solo para tipo mobile_payment"
          },
          "instructions": {
            "type": "object",
            "nullable": true,
            "description": "Instrucciones para completar el depósito"
          },
          "receipt": {
            "type": "object",
            "nullable": true,
            "description": "Datos del comprobante subido"
          },
          "status_history": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "to": {
                  "type": "string"
                },
                "reason": {
                  "type": "string"
                },
                "timestamp": {
                  "type": "string",
                  "format": "date-time"
                }
              }
            }
          },
          "extension_count": {
            "type": "integer",
            "example": 0
          },
          "expires_at": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          },
          "created_at": {
            "type": "string",
            "format": "date-time"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time"
          }
        }
      }
    },
    "parameters": {
      "limitParam": {
        "name": "limit",
        "in": "query",
        "schema": {
          "type": "integer",
          "default": 20,
          "maximum": 100
        },
        "description": "Máximo de resultados"
      },
      "offsetParam": {
        "name": "offset",
        "in": "query",
        "schema": {
          "type": "integer",
          "default": 0
        },
        "description": "Desplazamiento para paginación"
      },
      "searchParam": {
        "name": "search",
        "in": "query",
        "schema": {
          "type": "string"
        },
        "description": "Término de búsqueda"
      }
    },
    "responses": {
      "Unauthorized": {
        "description": "Token JWT faltante, inválido o revocado. Posibles mensajes: `No token provided`, `Invalid or expired token`, `Token ha sido revocado`.",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/ErrorResponse"
            },
            "examples": {
              "missing": {
                "summary": "Token no proporcionado",
                "value": {
                  "success": false,
                  "data": {
                    "error": {
                      "code": 401,
                      "message": "No token provided"
                    }
                  }
                }
              },
              "expired": {
                "summary": "Token expirado o inválido",
                "value": {
                  "success": false,
                  "data": {
                    "error": {
                      "code": 401,
                      "message": "Invalid or expired token"
                    }
                  }
                }
              },
              "revoked": {
                "summary": "Token revocado (logout o cambio de contraseña)",
                "value": {
                  "success": false,
                  "data": {
                    "error": {
                      "code": 401,
                      "message": "Token ha sido revocado"
                    }
                  }
                }
              }
            }
          }
        }
      },
      "Forbidden": {
        "description": "Permisos insuficientes",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/ErrorResponse"
            }
          }
        }
      },
      "NotFound": {
        "description": "Recurso no encontrado",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/ErrorResponse"
            }
          }
        }
      },
      "ServerError": {
        "description": "Error interno del servidor",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/ErrorResponse"
            }
          }
        }
      }
    }
  },
  "paths": {
    "/health": {
      "get": {
        "tags": [
          "Public"
        ],
        "summary": "Health check del servidor",
        "responses": {
          "200": {
            "description": "Servidor funcionando",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "example": "ok"
                    },
                    "version": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/public/stats": {
      "get": {
        "tags": [
          "Public"
        ],
        "summary": "Estadísticas públicas de la plataforma",
        "responses": {
          "200": {
            "description": "Estadísticas generales (usuarios, grupos, transacciones)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/public/products": {
      "get": {
        "tags": [
          "Public"
        ],
        "summary": "Productos destacados para preview público",
        "parameters": [
          {
            "$ref": "#/components/parameters/limitParam"
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de productos",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/public/info": {
      "get": {
        "tags": [
          "Public"
        ],
        "summary": "Información general de la plataforma",
        "responses": {
          "200": {
            "description": "Info de La Tanda",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/public/lottery/recent": {
      "get": {
        "tags": [
          "Public"
        ],
        "summary": "Resultados recientes de lotería",
        "responses": {
          "200": {
            "description": "Últimos resultados",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/login": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Iniciar sesión",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "email",
                  "password"
                ],
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email"
                  },
                  "password": {
                    "type": "string",
                    "minLength": 8
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Login exitoso — retorna JWT token y datos del usuario",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "token": {
                          "type": "string"
                        },
                        "user": {
                          "$ref": "#/components/schemas/User"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/auth/register": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Registrar nuevo usuario",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "name",
                  "email",
                  "password"
                ],
                "properties": {
                  "name": {
                    "type": "string",
                    "maxLength": 255
                  },
                  "email": {
                    "type": "string",
                    "format": "email"
                  },
                  "password": {
                    "type": "string",
                    "minLength": 8
                  },
                  "phone": {
                    "type": "string"
                  },
                  "referralCode": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Usuario creado exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            }
          },
          "409": {
            "description": "Email ya registrado"
          }
        }
      }
    },
    "/api/auth/check-duplicates": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Verificar si email ya existe",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Resultado de verificación"
          }
        }
      }
    },
    "/api/auth/send-verification": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Enviar email de verificación",
        "responses": {
          "200": {
            "description": "Email enviado"
          }
        }
      }
    },
    "/api/auth/verify-email": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Verificar email con token",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "token": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Email verificado"
          }
        }
      }
    },
    "/api/auth/request-reset": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Solicitar reset de contraseña",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Email de reset enviado"
          }
        }
      }
    },
    "/api/auth/verify-reset-token": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Verificar token de reset",
        "responses": {
          "200": {
            "description": "Token válido"
          }
        }
      }
    },
    "/api/auth/reset-password": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Resetear contraseña con token",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "token": {
                    "type": "string"
                  },
                  "password": {
                    "type": "string",
                    "minLength": 8
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Contraseña actualizada"
          }
        }
      }
    },
    "/api/auth/refresh": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Refrescar JWT token",
        "responses": {
          "200": {
            "description": "Nuevo token generado"
          }
        }
      }
    },
    "/api/auth/logout": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Cerrar sesión",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Sesión cerrada"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/user/profile": {
      "get": {
        "tags": [
          "User"
        ],
        "summary": "Obtener perfil del usuario autenticado",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Datos del perfil",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "$ref": "#/components/schemas/User"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      },
      "put": {
        "tags": [
          "User"
        ],
        "summary": "Actualizar perfil del usuario",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "phone": {
                    "type": "string"
                  },
                  "bio": {
                    "type": "string"
                  },
                  "location": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Perfil actualizado"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/user/avatar": {
      "post": {
        "tags": [
          "User"
        ],
        "summary": "Subir avatar del usuario",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "avatar": {
                    "type": "string",
                    "format": "binary"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Avatar actualizado"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/user/settings": {
      "get": {
        "tags": [
          "User"
        ],
        "summary": "Obtener configuración del usuario",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Configuración actual"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      },
      "put": {
        "tags": [
          "User"
        ],
        "summary": "Actualizar configuración",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Configuración actualizada"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/user/change-password": {
      "post": {
        "tags": [
          "User"
        ],
        "summary": "Cambiar contraseña",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "currentPassword",
                  "newPassword"
                ],
                "properties": {
                  "currentPassword": {
                    "type": "string"
                  },
                  "newPassword": {
                    "type": "string",
                    "minLength": 8
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Contraseña cambiada"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/user/activity": {
      "get": {
        "tags": [
          "User"
        ],
        "summary": "Obtener actividad reciente del usuario",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de actividades"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/user/achievements": {
      "get": {
        "tags": [
          "User"
        ],
        "summary": "Obtener logros del usuario",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de logros"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/user/devices": {
      "get": {
        "tags": [
          "User"
        ],
        "summary": "Listar dispositivos conectados",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de dispositivos"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/user/2fa/setup": {
      "post": {
        "tags": [
          "User"
        ],
        "summary": "Configurar autenticación 2FA",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "QR code y secreto para configurar TOTP"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/user/2fa/verify": {
      "post": {
        "tags": [
          "User"
        ],
        "summary": "Verificar código 2FA",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "code": {
                    "type": "string",
                    "pattern": "^[0-9]{6}$"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "2FA activado"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/user/2fa/disable": {
      "post": {
        "tags": [
          "User"
        ],
        "summary": "Desactivar 2FA",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "2FA desactivado"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/user/2fa/status": {
      "get": {
        "tags": [
          "User"
        ],
        "summary": "Estado de 2FA",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Estado actual de 2FA"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/wallet/balance": {
      "get": {
        "tags": [
          "Wallet"
        ],
        "summary": "Obtener balance de la billetera",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Balance actual en HNL, USD, LTD tokens"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/wallet/balance-history": {
      "get": {
        "tags": [
          "Wallet"
        ],
        "summary": "Historial de balance",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Historial de movimientos"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/wallet/withdrawals": {
      "post": {
        "tags": [
          "Wallet"
        ],
        "summary": "Solicitar retiro",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "amount",
                  "type"
                ],
                "properties": {
                  "amount": {
                    "type": "number"
                  },
                  "type": {
                    "type": "string",
                    "enum": [
                      "bank",
                      "mobile",
                      "crypto"
                    ]
                  },
                  "address": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Retiro solicitado"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/wallet/pin/set": {
      "post": {
        "tags": [
          "Wallet"
        ],
        "summary": "Establecer PIN de seguridad",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "PIN establecido"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/wallet/pin/status": {
      "get": {
        "tags": [
          "Wallet"
        ],
        "summary": "Estado del PIN",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "PIN activo/inactivo"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/wallet/pin/verify": {
      "post": {
        "tags": [
          "Wallet"
        ],
        "summary": "Verificar PIN",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "PIN válido"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/wallet/deposit/bank-transfer": {
      "post": {
        "tags": [
          "Wallet"
        ],
        "summary": "Crear depósito por transferencia bancaria",
        "description": "Crea un depósito pendiente de transferencia bancaria. El usuario debe transferir a la cuenta receptora y luego subir el comprobante.",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "amount",
                  "bank_code"
                ],
                "properties": {
                  "amount": {
                    "type": "number",
                    "minimum": 1,
                    "example": 500.0,
                    "description": "Monto a depositar en HNL"
                  },
                  "bank_code": {
                    "type": "string",
                    "example": "BAC",
                    "description": "Código del banco emisor"
                  },
                  "reference_number": {
                    "type": "string",
                    "example": "REF-2026-001",
                    "description": "Número de referencia de la transferencia (opcional)"
                  },
                  "user_account_number": {
                    "type": "string",
                    "description": "Número de cuenta del usuario (opcional)"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Depósito creado, pendiente de confirmación",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "$ref": "#/components/schemas/Deposit"
                    },
                    "message": {
                      "type": "string",
                      "example": "Depósito creado exitosamente"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Monto inválido o datos faltantes",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "500": {
            "$ref": "#/components/responses/ServerError"
          }
        }
      }
    },
    "/api/wallet/deposit/mobile": {
      "post": {
        "tags": [
          "Wallet"
        ],
        "summary": "Crear depósito móvil (Tigo Money)",
        "description": "Crea un depósito vía pago móvil (Tigo Money). Genera un código SMS para verificación.",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "amount",
                  "phone_number",
                  "carrier"
                ],
                "properties": {
                  "amount": {
                    "type": "number",
                    "minimum": 1,
                    "example": 200.0,
                    "description": "Monto a depositar en HNL"
                  },
                  "phone_number": {
                    "type": "string",
                    "example": "+50499887766",
                    "description": "Número de teléfono del usuario"
                  },
                  "carrier": {
                    "type": "string",
                    "example": "tigo",
                    "description": "Operador móvil"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Depósito móvil creado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "$ref": "#/components/schemas/Deposit"
                    },
                    "message": {
                      "type": "string",
                      "example": "Depósito móvil creado exitosamente"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Monto o datos inválidos",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "500": {
            "$ref": "#/components/responses/ServerError"
          }
        }
      }
    },
    "/api/wallet/deposit/crypto": {
      "post": {
        "tags": [
          "Wallet"
        ],
        "summary": "Crear depósito crypto",
        "description": "Crea un depósito de criptomoneda. Genera una dirección de depósito y código QR para el usuario.",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "amount",
                  "crypto_currency"
                ],
                "properties": {
                  "amount": {
                    "type": "number",
                    "minimum": 1,
                    "example": 100.0,
                    "description": "Monto equivalente en HNL"
                  },
                  "crypto_currency": {
                    "type": "string",
                    "enum": [
                      "BTC",
                      "ETH",
                      "USDT"
                    ],
                    "example": "USDT",
                    "description": "Criptomoneda para el depósito"
                  },
                  "network": {
                    "type": "string",
                    "example": "ethereum",
                    "description": "Red blockchain (opcional)"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Dirección de depósito generada",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "$ref": "#/components/schemas/Deposit"
                    },
                    "message": {
                      "type": "string",
                      "example": "Depósito crypto creado exitosamente"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Datos inválidos",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "500": {
            "$ref": "#/components/responses/ServerError"
          }
        }
      }
    },
    "/api/deposit/upload-receipt": {
      "post": {
        "tags": [
          "Wallet"
        ],
        "summary": "Subir comprobante de depósito",
        "description": "Sube un comprobante (imagen) para un depósito pendiente. Actualiza el estado a `receipt_uploaded`.",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "required": [
                  "deposit_id",
                  "receipt"
                ],
                "properties": {
                  "deposit_id": {
                    "type": "string",
                    "description": "ID del depósito"
                  },
                  "receipt": {
                    "type": "string",
                    "format": "binary",
                    "description": "Imagen del comprobante (JPEG, PNG)"
                  },
                  "notes": {
                    "type": "string",
                    "description": "Notas adicionales sobre el comprobante"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Comprobante subido exitosamente",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            }
          },
          "400": {
            "description": "Depósito no encontrado o archivo inválido",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "500": {
            "$ref": "#/components/responses/ServerError"
          }
        }
      }
    },
    "/api/deposit/track/{depositId}": {
      "get": {
        "tags": [
          "Wallet"
        ],
        "summary": "Rastrear estado de depósito",
        "description": "Obtiene el estado actual y detalles de un depósito. Solo el dueño del depósito puede consultarlo.",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "depositId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ID del depósito a rastrear"
          }
        ],
        "responses": {
          "200": {
            "description": "Detalles del depósito",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "$ref": "#/components/schemas/Deposit"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "500": {
            "$ref": "#/components/responses/ServerError"
          }
        }
      }
    },
    "/api/deposit/update-status": {
      "post": {
        "tags": [
          "Wallet"
        ],
        "summary": "Actualizar estado de depósito (admin)",
        "description": "Actualiza el estado de un depósito. Si el nuevo estado es `confirmed`, acredita el monto al wallet del usuario de forma transaccional. Requiere rol admin.",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "deposit_id",
                  "new_status"
                ],
                "properties": {
                  "deposit_id": {
                    "type": "string",
                    "description": "ID del depósito"
                  },
                  "new_status": {
                    "type": "string",
                    "enum": [
                      "processing",
                      "confirmed",
                      "failed",
                      "expired"
                    ],
                    "description": "Nuevo estado del depósito"
                  },
                  "admin_notes": {
                    "type": "string",
                    "description": "Notas del administrador"
                  },
                  "received_amount": {
                    "type": "number",
                    "description": "Monto recibido (si difiere del solicitado)"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Estado actualizado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            }
          },
          "400": {
            "description": "Transición de estado inválida",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "403": {
            "$ref": "#/components/responses/Forbidden"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "500": {
            "$ref": "#/components/responses/ServerError"
          }
        }
      }
    },
    "/api/deposit/cancel": {
      "post": {
        "tags": [
          "Wallet"
        ],
        "summary": "Cancelar depósito",
        "description": "Cancela un depósito pendiente del usuario autenticado. Solo depósitos en estado `pending_transfer` pueden cancelarse.",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "deposit_id"
                ],
                "properties": {
                  "deposit_id": {
                    "type": "string",
                    "description": "ID del depósito a cancelar"
                  },
                  "reason": {
                    "type": "string",
                    "description": "Razón de la cancelación (opcional)"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Depósito cancelado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            }
          },
          "400": {
            "description": "El depósito no puede ser cancelado en su estado actual",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "500": {
            "$ref": "#/components/responses/ServerError"
          }
        }
      }
    },
    "/api/deposit/modify": {
      "post": {
        "tags": [
          "Wallet"
        ],
        "summary": "Modificar depósito pendiente",
        "description": "Modifica el monto o referencia de un depósito pendiente. Solo depósitos en estado `pending_transfer` pueden modificarse. Historial de modificaciones se registra.",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "deposit_id"
                ],
                "properties": {
                  "deposit_id": {
                    "type": "string",
                    "description": "ID del depósito"
                  },
                  "amount": {
                    "type": "number",
                    "minimum": 1,
                    "description": "Nuevo monto del depósito"
                  },
                  "reference_number": {
                    "type": "string",
                    "description": "Nuevo número de referencia"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Depósito modificado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            }
          },
          "400": {
            "description": "El depósito no puede ser modificado o datos inválidos",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "500": {
            "$ref": "#/components/responses/ServerError"
          }
        }
      }
    },
    "/api/deposit/extend": {
      "post": {
        "tags": [
          "Wallet"
        ],
        "summary": "Extender tiempo de depósito",
        "description": "Extiende el plazo de expiración de un depósito pendiente. Máximo 3 extensiones permitidas. Historial de extensiones se registra.",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "deposit_id"
                ],
                "properties": {
                  "deposit_id": {
                    "type": "string",
                    "description": "ID del depósito"
                  },
                  "extension_hours": {
                    "type": "integer",
                    "minimum": 1,
                    "maximum": 72,
                    "example": 24,
                    "description": "Horas adicionales (default: 24)"
                  },
                  "reason": {
                    "type": "string",
                    "description": "Razón de la extensión (opcional)"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Plazo extendido",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            }
          },
          "400": {
            "description": "Límite de extensiones alcanzado o estado inválido",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "500": {
            "$ref": "#/components/responses/ServerError"
          }
        }
      }
    },
    "/api/admin/deposits/pending": {
      "get": {
        "tags": [
          "Wallet"
        ],
        "summary": "Listar depósitos pendientes (admin)",
        "description": "Lista todos los depósitos con estado `pending_transfer` o `processing`. Requiere rol admin.",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de depósitos pendientes",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "deposits": {
                          "type": "array",
                          "items": {
                            "$ref": "#/components/schemas/Deposit"
                          }
                        },
                        "total": {
                          "type": "integer",
                          "example": 5
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "403": {
            "$ref": "#/components/responses/Forbidden"
          },
          "500": {
            "$ref": "#/components/responses/ServerError"
          }
        }
      }
    },
    "/api/admin/deposits/confirm": {
      "post": {
        "tags": [
          "Wallet"
        ],
        "summary": "Confirmar depósito (admin)",
        "description": "Confirma un depósito y acredita el monto neto al wallet del usuario. Operación transaccional: actualiza depósito + acredita wallet + registra transacción. Requiere rol admin.",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "deposit_id"
                ],
                "properties": {
                  "deposit_id": {
                    "type": "string",
                    "description": "ID del depósito a confirmar"
                  },
                  "admin_notes": {
                    "type": "string",
                    "description": "Notas del administrador"
                  },
                  "received_amount": {
                    "type": "number",
                    "description": "Monto realmente recibido (si difiere del original)"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Depósito confirmado y wallet acreditado",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Depósito confirmado y wallet acreditado"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Depósito no encontrado o no es confirmable",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "403": {
            "$ref": "#/components/responses/Forbidden"
          },
          "500": {
            "$ref": "#/components/responses/ServerError"
          }
        }
      }
    },
    "/api/admin/deposits/reject": {
      "post": {
        "tags": [
          "Wallet"
        ],
        "summary": "Rechazar depósito (admin)",
        "description": "Rechaza un depósito pendiente con razón. Requiere rol admin.",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "deposit_id",
                  "rejection_reason"
                ],
                "properties": {
                  "deposit_id": {
                    "type": "string",
                    "description": "ID del depósito a rechazar"
                  },
                  "rejection_reason": {
                    "type": "string",
                    "description": "Razón del rechazo"
                  },
                  "admin_notes": {
                    "type": "string",
                    "description": "Notas adicionales del administrador"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Depósito rechazado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            }
          },
          "400": {
            "description": "Depósito no encontrado o no puede ser rechazado",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "403": {
            "$ref": "#/components/responses/Forbidden"
          },
          "500": {
            "$ref": "#/components/responses/ServerError"
          }
        }
      }
    },
    "/api/wallet/withdraw/bank": {
      "post": {
        "tags": [
          "Wallet"
        ],
        "summary": "Retiro a cuenta bancaria",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Retiro bancario solicitado"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/wallet/withdraw/mobile": {
      "post": {
        "tags": [
          "Wallet"
        ],
        "summary": "Retiro a billetera móvil",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Retiro móvil solicitado"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/wallet/withdraw/crypto": {
      "post": {
        "tags": [
          "Wallet"
        ],
        "summary": "Retiro a dirección crypto",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Retiro crypto solicitado"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/wallet/withdraw/fees": {
      "get": {
        "tags": [
          "Wallet"
        ],
        "summary": "Consultar comisiones de retiro",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Tabla de comisiones por método"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/payments/history": {
      "get": {
        "tags": [
          "Wallet"
        ],
        "summary": "Historial de pagos",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/limitParam"
          },
          {
            "$ref": "#/components/parameters/offsetParam"
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de pagos"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/payments/methods/available": {
      "get": {
        "tags": [
          "Wallet"
        ],
        "summary": "Métodos de pago disponibles",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de métodos"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/groups": {
      "get": {
        "tags": [
          "Groups"
        ],
        "summary": "Listar grupos",
        "parameters": [
          {
            "$ref": "#/components/parameters/limitParam"
          },
          {
            "$ref": "#/components/parameters/offsetParam"
          },
          {
            "$ref": "#/components/parameters/searchParam"
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de grupos"
          }
        }
      },
      "post": {
        "tags": [
          "Groups"
        ],
        "summary": "Crear nuevo grupo de ahorro",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "name",
                  "contribution_amount",
                  "frequency"
                ],
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "description": {
                    "type": "string"
                  },
                  "category": {
                    "type": "string"
                  },
                  "contribution_amount": {
                    "type": "number"
                  },
                  "frequency": {
                    "type": "string",
                    "enum": [
                      "weekly",
                      "biweekly",
                      "monthly"
                    ]
                  },
                  "max_members": {
                    "type": "integer"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Grupo creado"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/groups/{groupId}": {
      "get": {
        "tags": [
          "Groups"
        ],
        "summary": "Obtener detalle de un grupo",
        "parameters": [
          {
            "name": "groupId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Datos del grupo"
          }
        }
      },
      "delete": {
        "tags": [
          "Groups"
        ],
        "summary": "Eliminar grupo",
        "description": "Soft delete (admin de grupo) o hard delete (super-admin con confirmación).",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "groupId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ID del grupo"
          },
          {
            "name": "mode",
            "in": "query",
            "schema": {
              "type": "string"
            },
            "description": "Modo: soft (default) o hard"
          },
          {
            "name": "confirm",
            "in": "query",
            "schema": {
              "type": "string"
            },
            "description": "Nombre del grupo (requerido para hard delete)"
          }
        ],
        "responses": {
          "200": {
            "description": "Grupo eliminado"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "403": {
            "$ref": "#/components/responses/Forbidden"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          }
        }
      }
    },
    "/api/groups/{groupId}/join": {
      "post": {
        "tags": [
          "Groups"
        ],
        "summary": "Unirse a un grupo",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "groupId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Unido exitosamente"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/groups/{groupId}/members": {
      "get": {
        "tags": [
          "Groups"
        ],
        "summary": "Listar miembros del grupo",
        "parameters": [
          {
            "name": "groupId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de miembros"
          }
        }
      }
    },
    "/api/groups/{groupId}/calendar": {
      "get": {
        "tags": [
          "Groups"
        ],
        "summary": "Calendario del grupo",
        "parameters": [
          {
            "name": "groupId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Calendario de pagos y turnos"
          }
        }
      }
    },
    "/api/groups/{groupId}/contributions": {
      "get": {
        "tags": [
          "Groups"
        ],
        "summary": "Contribuciones del grupo",
        "parameters": [
          {
            "name": "groupId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de contribuciones"
          }
        }
      }
    },
    "/api/groups/{groupId}/stats": {
      "get": {
        "tags": [
          "Groups"
        ],
        "summary": "Estadísticas del grupo",
        "parameters": [
          {
            "name": "groupId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Stats del grupo"
          }
        }
      }
    },
    "/api/groups/{groupId}/payout/request": {
      "post": {
        "tags": [
          "Groups"
        ],
        "summary": "Solicitar payout del grupo",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "groupId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Payout solicitado"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/groups/{groupId}/payout/status": {
      "get": {
        "tags": [
          "Groups"
        ],
        "summary": "Estado de payout",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "groupId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Estado actual del payout"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/tandas": {
      "get": {
        "tags": [
          "Tandas"
        ],
        "summary": "Listar tandas disponibles",
        "responses": {
          "200": {
            "description": "Lista de tandas"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        },
        "security": [
          {
            "BearerAuth": []
          }
        ]
      }
    },
    "/api/tandas/create": {
      "post": {
        "tags": [
          "Tandas"
        ],
        "summary": "Crear nueva tanda de ahorro rotativo",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "201": {
            "description": "Tanda creada"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/tandas/my-tandas": {
      "get": {
        "tags": [
          "Tandas"
        ],
        "summary": "Mis tandas",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Tandas del usuario"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/tandas/pay": {
      "post": {
        "tags": [
          "Tandas"
        ],
        "summary": "Realizar pago de tanda",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Pago registrado"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/tandas/available-positions": {
      "get": {
        "tags": [
          "Tandas"
        ],
        "summary": "Posiciones disponibles",
        "responses": {
          "200": {
            "description": "Lista de posiciones"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        },
        "security": [
          {
            "BearerAuth": []
          }
        ]
      }
    },
    "/api/contributions": {
      "get": {
        "tags": [
          "Contributions"
        ],
        "summary": "Listar contribuciones del usuario",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de contribuciones"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      },
      "post": {
        "tags": [
          "Contributions"
        ],
        "summary": "Hacer una contribución",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Contribución registrada"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/feed/social": {
      "get": {
        "tags": [
          "Social Feed"
        ],
        "summary": "Obtener feed social",
        "parameters": [
          {
            "$ref": "#/components/parameters/limitParam"
          },
          {
            "$ref": "#/components/parameters/offsetParam"
          },
          {
            "$ref": "#/components/parameters/searchParam"
          },
          {
            "name": "tab",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": [
                "all",
                "following",
                "trending"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de publicaciones"
          }
        }
      },
      "post": {
        "tags": [
          "Social Feed"
        ],
        "summary": "Crear publicación",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "title": {
                    "type": "string"
                  },
                  "description": {
                    "type": "string"
                  },
                  "media_urls": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "is_anonymous": {
                    "type": "boolean"
                  },
                  "poll_options": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Publicación creada"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/feed/social/{postId}": {
      "put": {
        "tags": [
          "Social Feed"
        ],
        "summary": "Editar publicación",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "postId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Publicación editada"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      },
      "delete": {
        "tags": [
          "Social Feed"
        ],
        "summary": "Eliminar publicación",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "postId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Publicación eliminada"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      },
      "get": {
        "tags": [
          "Social Feed"
        ],
        "summary": "Obtener post individual",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "postId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ID del post"
          }
        ],
        "responses": {
          "200": {
            "description": "Detalles del post"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          }
        }
      }
    },
    "/api/feed/social/{postId}/like": {
      "post": {
        "tags": [
          "Social Feed"
        ],
        "summary": "Dar/quitar like a publicación",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "postId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Like toggled"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/feed/social/{postId}/bookmark": {
      "post": {
        "tags": [
          "Social Feed"
        ],
        "summary": "Guardar/quitar bookmark",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "postId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Bookmark toggled"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/feed/social/{postId}/comments": {
      "get": {
        "tags": [
          "Social Feed"
        ],
        "summary": "Obtener comentarios de publicación",
        "parameters": [
          {
            "name": "postId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de comentarios"
          }
        }
      },
      "post": {
        "tags": [
          "Social Feed"
        ],
        "summary": "Agregar comentario",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "postId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "content": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Comentario creado"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/feed/social/follow/{userId}": {
      "post": {
        "tags": [
          "Social Feed"
        ],
        "summary": "Seguir usuario",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "userId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Siguiendo"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      },
      "delete": {
        "tags": [
          "Social Feed"
        ],
        "summary": "Dejar de seguir",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "userId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Dejó de seguir"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/feed/social/bookmarks": {
      "get": {
        "tags": [
          "Social Feed"
        ],
        "summary": "Mis bookmarks",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Publicaciones guardadas"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/feed/social/trending": {
      "get": {
        "tags": [
          "Social Feed"
        ],
        "summary": "Publicaciones trending",
        "responses": {
          "200": {
            "description": "Top publicaciones"
          }
        }
      }
    },
    "/api/marketplace/categories": {
      "get": {
        "tags": [
          "Marketplace - Services"
        ],
        "summary": "Listar categorías del marketplace",
        "responses": {
          "200": {
            "description": "Lista de categorías con iconos y nombres en español"
          }
        }
      }
    },
    "/api/marketplace/services": {
      "get": {
        "tags": [
          "Marketplace - Services"
        ],
        "summary": "Listar servicios",
        "parameters": [
          {
            "$ref": "#/components/parameters/limitParam"
          },
          {
            "$ref": "#/components/parameters/offsetParam"
          },
          {
            "$ref": "#/components/parameters/searchParam"
          },
          {
            "name": "category",
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "featured",
            "in": "query",
            "schema": {
              "type": "boolean"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Lista paginada de servicios",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "services": {
                          "type": "array",
                          "items": {
                            "$ref": "#/components/schemas/Service"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Marketplace - Services"
        ],
        "summary": "Crear servicio",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "title",
                  "description",
                  "price",
                  "category_id"
                ],
                "properties": {
                  "title": {
                    "type": "string",
                    "maxLength": 255
                  },
                  "description": {
                    "type": "string",
                    "maxLength": 2000
                  },
                  "price": {
                    "type": "number"
                  },
                  "price_type": {
                    "type": "string",
                    "enum": [
                      "fixed",
                      "hourly",
                      "quote"
                    ]
                  },
                  "currency": {
                    "type": "string",
                    "enum": [
                      "HNL",
                      "USD",
                      "LTD"
                    ],
                    "default": "HNL"
                  },
                  "category_id": {
                    "type": "integer"
                  },
                  "duration_hours": {
                    "type": "number"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Servicio creado"
          },
          "403": {
            "description": "Tu tienda no permite servicios (tipo Productos)"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/marketplace/services/{serviceId}": {
      "get": {
        "tags": [
          "Marketplace - Services"
        ],
        "summary": "Detalle de un servicio",
        "parameters": [
          {
            "name": "serviceId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Datos del servicio"
          }
        }
      },
      "patch": {
        "tags": [
          "Marketplace - Services"
        ],
        "summary": "Actualizar featured/display_order de servicio",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "serviceId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "featured": {
                    "type": "boolean"
                  },
                  "display_order": {
                    "type": "integer"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Servicio actualizado"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/marketplace/services/upload-images": {
      "post": {
        "tags": [
          "Marketplace - Services"
        ],
        "summary": "Subir imágenes para servicio",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "images": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "format": "binary"
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "URLs de imágenes subidas"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/marketplace/products": {
      "get": {
        "tags": [
          "Marketplace - Products"
        ],
        "summary": "Listar productos",
        "parameters": [
          {
            "$ref": "#/components/parameters/limitParam"
          },
          {
            "$ref": "#/components/parameters/offsetParam"
          },
          {
            "$ref": "#/components/parameters/searchParam"
          },
          {
            "name": "sellerId",
            "in": "query",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de productos"
          }
        }
      },
      "post": {
        "tags": [
          "Marketplace - Products"
        ],
        "summary": "Crear producto",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "title",
                  "price",
                  "quantity"
                ],
                "properties": {
                  "title": {
                    "type": "string"
                  },
                  "description": {
                    "type": "string"
                  },
                  "price": {
                    "type": "number"
                  },
                  "currency": {
                    "type": "string",
                    "enum": [
                      "HNL",
                      "USD",
                      "LTD"
                    ]
                  },
                  "quantity": {
                    "type": "integer"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Producto creado"
          },
          "403": {
            "description": "Tu tienda no permite productos (tipo Servicios)"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/marketplace/products/{productId}": {
      "get": {
        "tags": [
          "Marketplace - Products"
        ],
        "summary": "Detalle de producto",
        "parameters": [
          {
            "name": "productId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Datos del producto"
          }
        }
      },
      "put": {
        "tags": [
          "Marketplace - Products"
        ],
        "summary": "Actualizar producto",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "productId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Producto actualizado"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      },
      "patch": {
        "tags": [
          "Marketplace - Products"
        ],
        "summary": "Actualizar featured/display_order de producto",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "productId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Producto actualizado"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      },
      "delete": {
        "tags": [
          "Marketplace - Products"
        ],
        "summary": "Eliminar producto",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "productId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Producto eliminado"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/marketplace/products/{productId}/buy": {
      "post": {
        "tags": [
          "Marketplace - Products"
        ],
        "summary": "Comprar producto",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "productId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "quantity": {
                    "type": "integer",
                    "default": 1
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Orden creada"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/marketplace/products/upload-images": {
      "post": {
        "tags": [
          "Marketplace - Products"
        ],
        "summary": "Subir imágenes para producto",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "images": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "format": "binary"
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "URLs de imágenes subidas"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/marketplace/providers": {
      "get": {
        "tags": [
          "Marketplace - Providers"
        ],
        "summary": "Listar proveedores/vendedores",
        "parameters": [
          {
            "$ref": "#/components/parameters/limitParam"
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de proveedores",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "providers": {
                          "type": "array",
                          "items": {
                            "$ref": "#/components/schemas/Provider"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/marketplace/providers/register": {
      "post": {
        "tags": [
          "Marketplace - Providers"
        ],
        "summary": "Registrar tienda (crear perfil de vendedor)",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "business_name",
                  "shop_type"
                ],
                "properties": {
                  "business_name": {
                    "type": "string",
                    "maxLength": 255
                  },
                  "description": {
                    "type": "string",
                    "maxLength": 2000
                  },
                  "shop_type": {
                    "type": "string",
                    "enum": [
                      "services",
                      "products"
                    ],
                    "description": "Tipo de tienda (mixed solo para Premium)"
                  },
                  "store_layout": {
                    "type": "string",
                    "enum": [
                      "classic",
                      "showcase",
                      "compact"
                    ]
                  },
                  "store_theme": {
                    "type": "string",
                    "enum": [
                      "dark",
                      "cyan",
                      "gold",
                      "green",
                      "coral",
                      "purple"
                    ]
                  },
                  "phone": {
                    "type": "string"
                  },
                  "whatsapp": {
                    "type": "string"
                  },
                  "email": {
                    "type": "string"
                  },
                  "city": {
                    "type": "string"
                  },
                  "neighborhood": {
                    "type": "string"
                  },
                  "service_areas": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "social_links": {
                    "type": "object",
                    "properties": {
                      "github": {
                        "type": "string"
                      },
                      "linkedin": {
                        "type": "string"
                      },
                      "website": {
                        "type": "string"
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Tienda creada"
          },
          "409": {
            "description": "Ya tienes una tienda registrada"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/marketplace/providers/me": {
      "get": {
        "tags": [
          "Marketplace - Providers"
        ],
        "summary": "Obtener mi perfil de vendedor",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Datos del provider o null"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      },
      "put": {
        "tags": [
          "Marketplace - Providers"
        ],
        "summary": "Actualizar mi tienda",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "business_name": {
                    "type": "string"
                  },
                  "description": {
                    "type": "string"
                  },
                  "phone": {
                    "type": "string"
                  },
                  "whatsapp": {
                    "type": "string"
                  },
                  "email": {
                    "type": "string"
                  },
                  "city": {
                    "type": "string"
                  },
                  "neighborhood": {
                    "type": "string"
                  },
                  "store_layout": {
                    "type": "string"
                  },
                  "store_theme": {
                    "type": "string"
                  },
                  "social_links": {
                    "type": "object"
                  }
                },
                "description": "shop_type NO se puede cambiar"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Tienda actualizada"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/marketplace/providers/{providerId}": {
      "get": {
        "tags": [
          "Marketplace - Providers"
        ],
        "summary": "Detalle de un proveedor con sus servicios",
        "parameters": [
          {
            "name": "providerId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Datos del proveedor + servicios"
          }
        }
      }
    },
    "/api/marketplace/providers/{providerId}/reviews": {
      "get": {
        "tags": [
          "Marketplace - Providers"
        ],
        "summary": "Reseñas de un proveedor",
        "parameters": [
          {
            "name": "providerId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de reseñas"
          }
        }
      }
    },
    "/api/marketplace/bookings": {
      "get": {
        "tags": [
          "Marketplace - Bookings"
        ],
        "summary": "Listar mis reservas",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de reservas"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      },
      "post": {
        "tags": [
          "Marketplace - Bookings"
        ],
        "summary": "Crear reserva de servicio",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "service_id"
                ],
                "properties": {
                  "service_id": {
                    "type": "integer"
                  },
                  "scheduled_date": {
                    "type": "string",
                    "format": "date"
                  },
                  "notes": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Reserva creada"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/marketplace/bookings/{bookingId}/status": {
      "put": {
        "tags": [
          "Marketplace - Bookings"
        ],
        "summary": "Actualizar estado de reserva",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "bookingId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "status": {
                    "type": "string",
                    "enum": [
                      "confirmed",
                      "completed",
                      "cancelled"
                    ]
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Estado actualizado"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/marketplace/reviews": {
      "post": {
        "tags": [
          "Marketplace - Bookings"
        ],
        "summary": "Crear reseña de servicio",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "booking_id",
                  "rating"
                ],
                "properties": {
                  "booking_id": {
                    "type": "integer"
                  },
                  "rating": {
                    "type": "integer",
                    "minimum": 1,
                    "maximum": 5
                  },
                  "comment": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Reseña creada"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/marketplace/favorites": {
      "get": {
        "tags": [
          "Marketplace - Services"
        ],
        "summary": "Mis servicios favoritos",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de favoritos"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      },
      "post": {
        "tags": [
          "Marketplace - Services"
        ],
        "summary": "Agregar a favoritos",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Agregado a favoritos"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      },
      "delete": {
        "tags": [
          "Marketplace - Services"
        ],
        "summary": "Quitar de favoritos",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Quitado de favoritos"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/marketplace/portfolio/cv/me": {
      "get": {
        "tags": [
          "Marketplace - Portfolio"
        ],
        "summary": "Obtener mi portafolio/CV para edición",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Datos del portafolio o null",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "portfolio": {
                          "$ref": "#/components/schemas/Portfolio"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      },
      "put": {
        "tags": [
          "Marketplace - Portfolio"
        ],
        "summary": "Crear o actualizar mi portafolio/CV",
        "description": "UPSERT — crea si no existe, actualiza si ya existe. El campo full_name siempre se resuelve del perfil del usuario (se ignora en el body). Requiere tienda activa.",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "professional_title": {
                    "type": "string",
                    "maxLength": 255
                  },
                  "summary": {
                    "type": "string",
                    "maxLength": 2000
                  },
                  "experience": {
                    "type": "array",
                    "maxItems": 20,
                    "items": {
                      "type": "object"
                    }
                  },
                  "education": {
                    "type": "array",
                    "maxItems": 10,
                    "items": {
                      "type": "object"
                    }
                  },
                  "skills": {
                    "type": "array",
                    "maxItems": 30,
                    "items": {
                      "type": "object"
                    }
                  },
                  "certifications": {
                    "type": "array",
                    "maxItems": 15,
                    "items": {
                      "type": "object"
                    }
                  },
                  "projects": {
                    "type": "array",
                    "maxItems": 15,
                    "items": {
                      "type": "object"
                    }
                  },
                  "languages": {
                    "type": "array",
                    "maxItems": 10,
                    "items": {
                      "type": "object"
                    }
                  },
                  "allow_downloads": {
                    "type": "boolean"
                  },
                  "is_public": {
                    "type": "boolean"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Portafolio guardado"
          },
          "403": {
            "description": "Necesitas una tienda activa"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      },
      "delete": {
        "tags": [
          "Marketplace - Portfolio"
        ],
        "summary": "Eliminar mi portafolio",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Portafolio eliminado"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/marketplace/portfolio/cv/parse": {
      "post": {
        "tags": [
          "Marketplace - Portfolio"
        ],
        "summary": "Importar CV desde PDF — extrae texto y parsea con IA",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "cv": {
                    "type": "string",
                    "format": "binary",
                    "description": "PDF máximo 5MB"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Datos del CV parseados por IA (Groq)"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/marketplace/portfolio/cv/generate-summary": {
      "post": {
        "tags": [
          "Marketplace - Portfolio"
        ],
        "summary": "Generar resumen profesional con IA",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "portfolioData": {
                    "type": "object",
                    "description": "Datos actuales del portafolio"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Resumen generado por Groq AI"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/marketplace/portfolio/{handle}": {
      "get": {
        "tags": [
          "Marketplace - Portfolio"
        ],
        "summary": "Portafolio público de un vendedor (para /negocio/{handle})",
        "description": "Endpoint público sin autenticación. Retorna datos del usuario, proveedor, servicios, productos, reseñas, y portafolio/CV si existe y es público.",
        "parameters": [
          {
            "name": "handle",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "example": "maria-lopez"
          }
        ],
        "responses": {
          "200": {
            "description": "Datos completos del portafolio público"
          },
          "404": {
            "description": "Handle no encontrado"
          }
        }
      }
    },
    "/api/marketplace/stats": {
      "get": {
        "tags": [
          "Marketplace - Providers"
        ],
        "summary": "Estadísticas del vendedor",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Stats de ventas, visitas, etc."
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/lottery/stats": {
      "get": {
        "tags": [
          "Lottery"
        ],
        "summary": "Estadísticas de frecuencia de números",
        "responses": {
          "200": {
            "description": "Frecuencias históricas de números de lotería de Honduras"
          }
        }
      }
    },
    "/api/lottery/stats/detailed": {
      "get": {
        "tags": [
          "Lottery"
        ],
        "summary": "Estadísticas detalladas",
        "responses": {
          "200": {
            "description": "Análisis detallado con patrones, gaps, tendencias"
          }
        }
      }
    },
    "/api/lottery/results": {
      "get": {
        "tags": [
          "Lottery"
        ],
        "summary": "Resultados recientes de la Lotería Nacional de Honduras",
        "responses": {
          "200": {
            "description": "Últimos sorteos con números ganadores"
          }
        }
      }
    },
    "/api/lottery/jaladores": {
      "get": {
        "tags": [
          "Lottery"
        ],
        "summary": "Tabla de números jaladores",
        "description": "Fórmula: (num+25)%100, (num+50)%100, (num+75)%100",
        "parameters": [
          {
            "name": "number",
            "in": "query",
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Números jaladores basados en último resultado real"
          }
        }
      }
    },
    "/api/lottery/predict-ml": {
      "get": {
        "tags": [
          "Lottery"
        ],
        "summary": "Predicción con modelo ML",
        "responses": {
          "200": {
            "description": "Predicciones generadas por modelo de machine learning"
          }
        }
      }
    },
    "/api/lottery/predict-ensemble": {
      "get": {
        "tags": [
          "Lottery"
        ],
        "summary": "Predicción ensemble (múltiples modelos)",
        "responses": {
          "200": {
            "description": "Predicciones combinadas de múltiples algoritmos"
          }
        }
      }
    },
    "/api/lottery/leaderboard": {
      "get": {
        "tags": [
          "Lottery"
        ],
        "summary": "Tabla de líderes de predicciones",
        "responses": {
          "200": {
            "description": "Top predictores por precisión"
          }
        }
      }
    },
    "/api/lottery/accuracy-dashboard": {
      "get": {
        "tags": [
          "Lottery"
        ],
        "summary": "Dashboard de precisión de predicciones",
        "responses": {
          "200": {
            "description": "Métricas de precisión histórica"
          }
        }
      }
    },
    "/api/mia/chat": {
      "post": {
        "tags": [
          "MIA AI"
        ],
        "summary": "Chat con asistente IA MIA",
        "description": "Powered by Groq Llama 3.3 70B. Máximo 2000 caracteres por mensaje. Roles permitidos: user, assistant.",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "message"
                ],
                "properties": {
                  "message": {
                    "type": "string",
                    "maxLength": 2000
                  },
                  "conversationHistory": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "role": {
                          "type": "string",
                          "enum": [
                            "user",
                            "assistant"
                          ]
                        },
                        "content": {
                          "type": "string"
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Respuesta de MIA"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/mia/status": {
      "get": {
        "tags": [
          "MIA AI"
        ],
        "summary": "Estado de MIA",
        "responses": {
          "200": {
            "description": "Disponibilidad del servicio de IA"
          }
        }
      }
    },
    "/api/push/vapid-key": {
      "get": {
        "tags": [
          "Notifications"
        ],
        "summary": "Obtener clave pública VAPID para push notifications",
        "responses": {
          "200": {
            "description": "Clave pública VAPID"
          }
        }
      }
    },
    "/api/push/subscribe": {
      "post": {
        "tags": [
          "Notifications"
        ],
        "summary": "Suscribir dispositivo a push notifications",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "subscription": {
                    "type": "object",
                    "description": "PushSubscription del navegador"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Suscripción registrada"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/push/unsubscribe": {
      "delete": {
        "tags": [
          "Notifications"
        ],
        "summary": "Desuscribir de push notifications",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Suscripción eliminada"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/upload/social-image": {
      "post": {
        "tags": [
          "Social Feed"
        ],
        "summary": "Subir imagen para publicación social",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "image": {
                    "type": "string",
                    "format": "binary"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "URL de imagen subida"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/upload/social-video": {
      "post": {
        "tags": [
          "Social Feed"
        ],
        "summary": "Subir video para publicación social",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "video": {
                    "type": "string",
                    "format": "binary"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "URL de video subido"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/referrals/my-code": {
      "get": {
        "tags": [
          "User"
        ],
        "summary": "Obtener mi código de referido",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Código de referido"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/referrals/list": {
      "get": {
        "tags": [
          "User"
        ],
        "summary": "Listar mis referidos",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de usuarios referidos"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/referrals/apply": {
      "post": {
        "tags": [
          "User"
        ],
        "summary": "Aplicar código de referido",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "code": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Código aplicado"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        },
        "security": [
          {
            "BearerAuth": []
          }
        ]
      }
    },
    "/api/link-preview": {
      "get": {
        "tags": [
          "User"
        ],
        "summary": "Preview de enlace (OG metadata)",
        "parameters": [
          {
            "name": "url",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uri"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Título, descripción, imagen del enlace"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        },
        "security": [
          {
            "BearerAuth": []
          }
        ]
      }
    },
    "/api/search": {
      "get": {
        "tags": [
          "Public"
        ],
        "summary": "Búsqueda global",
        "parameters": [
          {
            "name": "q",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Resultados de búsqueda"
          }
        }
      }
    },
    "/api/users/search-mentions": {
      "post": {
        "tags": [
          "Social Feed"
        ],
        "summary": "Buscar usuarios para menciones (@)",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "query": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Lista de usuarios que coinciden"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/gifs/search": {
      "get": {
        "tags": [
          "Social Feed"
        ],
        "summary": "Buscar GIFs (Klipy API)",
        "parameters": [
          {
            "name": "q",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "GIFs encontrados"
          }
        }
      }
    },
    "/api/gifs/trending": {
      "get": {
        "tags": [
          "Social Feed"
        ],
        "summary": "GIFs trending (Klipy API)",
        "responses": {
          "200": {
            "description": "GIFs populares"
          }
        }
      }
    },
    "/api/rewards/onboarding/claim": {
      "post": {
        "tags": [
          "User"
        ],
        "summary": "Reclamar recompensa de onboarding",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Recompensa reclamada"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/rewards/onboarding/status": {
      "get": {
        "tags": [
          "User"
        ],
        "summary": "Estado de recompensa de onboarding",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Progreso de onboarding"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/hub/summary": {
      "get": {
        "tags": [
          "User"
        ],
        "summary": "Resumen del hub de usuario",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Resumen de actividad, balance, grupos"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/kyc/process-ocr": {
      "post": {
        "tags": [
          "User"
        ],
        "summary": "Procesar documento de identidad (OCR)",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "document": {
                    "type": "string",
                    "format": "binary"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Datos extraídos del documento"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/kyc/status": {
      "get": {
        "tags": [
          "User"
        ],
        "summary": "Estado de verificación KYC",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Estado actual de verificación de identidad"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/auth/webauthn/register-options": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Opciones de registro WebAuthn",
        "description": "Genera challenge de registro biométrico (FIDO2/WebAuthn).",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Challenge de registro generado"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/auth/webauthn/register": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Registrar credencial WebAuthn",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "credential": {
                    "type": "object"
                  },
                  "device_name": {
                    "type": "string"
                  }
                },
                "required": [
                  "credential"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Credencial biométrica registrada"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/auth/webauthn/authenticate-options": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Opciones de autenticación WebAuthn",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Challenge de autenticación generado"
          }
        }
      }
    },
    "/api/auth/webauthn/authenticate": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Autenticar con WebAuthn",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "user_id": {
                    "type": "string"
                  },
                  "credential": {
                    "type": "object"
                  }
                },
                "required": [
                  "credential"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Autenticación exitosa, retorna JWT"
          }
        }
      }
    },
    "/api/auth/webauthn/credentials": {
      "get": {
        "tags": [
          "Auth"
        ],
        "summary": "Listar credenciales WebAuthn",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de credenciales biométricas del usuario"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/auth/webauthn/credentials/{credentialId}": {
      "delete": {
        "tags": [
          "Auth"
        ],
        "summary": "Eliminar credencial WebAuthn",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "credentialId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ID de la credencial"
          }
        ],
        "responses": {
          "200": {
            "description": "Credencial eliminada"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          }
        }
      }
    },
    "/api/auth/account-data/{userId}": {
      "get": {
        "tags": [
          "Auth"
        ],
        "summary": "Exportar datos de cuenta",
        "description": "Descarga resumen de datos del usuario (GDPR). Solo cuenta propia o admin.",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "userId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ID del usuario"
          }
        ],
        "responses": {
          "200": {
            "description": "Datos de la cuenta"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/auth/delete-account/{userId}": {
      "delete": {
        "tags": [
          "Auth"
        ],
        "summary": "Eliminar cuenta",
        "description": "Eliminación segura de cuenta. Solo cuenta propia o admin.",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "userId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ID del usuario"
          }
        ],
        "responses": {
          "200": {
            "description": "Cuenta eliminada"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/recovery/backup-codes/generate": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Generar códigos de respaldo",
        "description": "Genera 10 códigos de respaldo para recuperación de cuenta.",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "current_password": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Códigos de respaldo generados (mostrados una sola vez)"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/recovery/backup-codes/verify": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Verificar código de respaldo",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email"
                  },
                  "backup_code": {
                    "type": "string"
                  }
                },
                "required": [
                  "backup_code"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Código verificado correctamente"
          }
        }
      }
    },
    "/api/recovery/backup-codes/status": {
      "get": {
        "tags": [
          "Auth"
        ],
        "summary": "Estado de códigos de respaldo",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Conteo de códigos disponibles/usados"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/recovery/security-questions/set": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Configurar preguntas de seguridad",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "questions": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "question": {
                          "type": "string"
                        },
                        "answer": {
                          "type": "string"
                        }
                      }
                    }
                  }
                },
                "required": [
                  "questions"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Preguntas configuradas"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/recovery/security-questions/verify": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Verificar preguntas de seguridad",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "email": {
                    "type": "string",
                    "format": "email"
                  },
                  "answers": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  }
                },
                "required": [
                  "email",
                  "answers"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Verificación exitosa (2 de 3 correctas)"
          }
        }
      }
    },
    "/api/recovery/security-questions/get": {
      "get": {
        "tags": [
          "Auth"
        ],
        "summary": "Obtener preguntas de seguridad",
        "parameters": [
          {
            "name": "email",
            "in": "query",
            "schema": {
              "type": "string"
            },
            "description": "Email del usuario",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de preguntas (sin respuestas)"
          }
        }
      }
    },
    "/api/contributions/request": {
      "post": {
        "tags": [
          "Contributions"
        ],
        "summary": "Solicitar referencia de pago",
        "description": "Genera código de referencia e instrucciones de pago para una contribución.",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "group_id": {
                    "type": "string"
                  },
                  "amount": {
                    "type": "number"
                  },
                  "payment_method": {
                    "type": "string"
                  }
                },
                "required": [
                  "group_id",
                  "amount"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Referencia de pago generada"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/contributions/{contributionId}/verify": {
      "post": {
        "tags": [
          "Contributions"
        ],
        "summary": "Verificar contribución (coordinador)",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "contributionId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ID de la contribución"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "action": {
                    "type": "string",
                    "enum": [
                      "approve",
                      "reject"
                    ]
                  },
                  "rejection_reason": {
                    "type": "string"
                  }
                },
                "required": [
                  "action"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Contribución verificada"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          }
        }
      }
    },
    "/api/contributions/{contributionId}/verify-ocr": {
      "post": {
        "tags": [
          "Contributions"
        ],
        "summary": "Verificación OCR de comprobante",
        "description": "Verifica automáticamente el comprobante de pago mediante OCR (Tesseract).",
        "parameters": [
          {
            "name": "contributionId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ID de la contribución"
          }
        ],
        "responses": {
          "200": {
            "description": "Resultado de verificación OCR"
          }
        }
      }
    },
    "/api/contributions/{contributionId}/upload-proof": {
      "post": {
        "tags": [
          "Contributions"
        ],
        "summary": "Subir comprobante de contribución",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "contributionId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ID de la contribución"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "proof": {
                    "type": "string",
                    "format": "binary"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Comprobante subido"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          }
        }
      }
    },
    "/api/feed/social/comments/{commentId}": {
      "delete": {
        "tags": [
          "Social Feed"
        ],
        "summary": "Eliminar comentario propio",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "commentId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ID del comentario"
          }
        ],
        "responses": {
          "200": {
            "description": "Comentario eliminado"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          }
        }
      }
    },
    "/api/feed/social/following": {
      "get": {
        "tags": [
          "Social Feed"
        ],
        "summary": "Feed de usuarios seguidos",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer"
            },
            "description": "Máximo"
          },
          {
            "name": "offset",
            "in": "query",
            "schema": {
              "type": "integer"
            },
            "description": "Desplazamiento"
          }
        ],
        "responses": {
          "200": {
            "description": "Feed de usuarios seguidos"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/feed/social/suggestions": {
      "get": {
        "tags": [
          "Social Feed"
        ],
        "summary": "Sugerencias de usuarios a seguir",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer"
            },
            "description": "Máximo"
          }
        ],
        "responses": {
          "200": {
            "description": "Usuarios sugeridos"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/feed/social/user/{userId}/profile": {
      "get": {
        "tags": [
          "Social Feed"
        ],
        "summary": "Perfil de usuario",
        "parameters": [
          {
            "name": "userId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ID del usuario"
          }
        ],
        "responses": {
          "200": {
            "description": "Mini perfil (nombre, avatar, bio, conteos, is_following)"
          }
        }
      }
    },
    "/api/feed/social/user/{userId}/posts": {
      "get": {
        "tags": [
          "Social Feed"
        ],
        "summary": "Posts de un usuario",
        "parameters": [
          {
            "name": "userId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ID del usuario"
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer"
            },
            "description": "Máximo"
          },
          {
            "name": "offset",
            "in": "query",
            "schema": {
              "type": "integer"
            },
            "description": "Desplazamiento"
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de posts del usuario"
          }
        }
      }
    },
    "/api/feed/social/user/{userId}/followers": {
      "get": {
        "tags": [
          "Social Feed"
        ],
        "summary": "Seguidores de un usuario",
        "parameters": [
          {
            "name": "userId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ID del usuario"
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer"
            },
            "description": "Máximo"
          },
          {
            "name": "offset",
            "in": "query",
            "schema": {
              "type": "integer"
            },
            "description": "Desplazamiento"
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de seguidores"
          }
        }
      }
    },
    "/api/feed/social/user/{userId}/following": {
      "get": {
        "tags": [
          "Social Feed"
        ],
        "summary": "Seguidos por un usuario",
        "parameters": [
          {
            "name": "userId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ID del usuario"
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer"
            },
            "description": "Máximo"
          },
          {
            "name": "offset",
            "in": "query",
            "schema": {
              "type": "integer"
            },
            "description": "Desplazamiento"
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de usuarios seguidos"
          }
        }
      }
    },
    "/api/feed/social/{postId}/vote": {
      "post": {
        "tags": [
          "Social Feed"
        ],
        "summary": "Votar en encuesta",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "postId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ID del post con encuesta"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "option_index": {
                    "type": "integer"
                  }
                },
                "required": [
                  "option_index"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Voto registrado"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/feed/social/{postId}/poll": {
      "get": {
        "tags": [
          "Social Feed"
        ],
        "summary": "Obtener resultados de encuesta",
        "parameters": [
          {
            "name": "postId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ID del post con encuesta"
          }
        ],
        "responses": {
          "200": {
            "description": "Resultados de la encuesta"
          }
        }
      }
    },
    "/api/groups/{groupId}/members/invite": {
      "post": {
        "tags": [
          "Groups"
        ],
        "summary": "Invitar miembro al grupo",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "groupId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ID del grupo"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "invitee_email": {
                    "type": "string"
                  },
                  "invitee_name": {
                    "type": "string"
                  }
                },
                "required": [
                  "invitee_email"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Invitación enviada"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/groups/{groupId}/members/{userId}": {
      "delete": {
        "tags": [
          "Groups"
        ],
        "summary": "Remover miembro del grupo",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "groupId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ID del grupo"
          },
          {
            "name": "userId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ID del usuario"
          }
        ],
        "responses": {
          "200": {
            "description": "Miembro removido"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "403": {
            "$ref": "#/components/responses/Forbidden"
          }
        }
      }
    },
    "/api/groups/{groupId}/contributions/pending": {
      "get": {
        "tags": [
          "Groups"
        ],
        "summary": "Contribuciones pendientes (coordinador)",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "groupId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ID del grupo"
          }
        ],
        "responses": {
          "200": {
            "description": "Contribuciones pendientes de verificación"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/groups/{groupId}/role-requests": {
      "post": {
        "tags": [
          "Groups"
        ],
        "summary": "Solicitar cambio de rol",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "groupId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ID del grupo"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "requested_role": {
                    "type": "string"
                  },
                  "reason": {
                    "type": "string"
                  }
                },
                "required": [
                  "requested_role"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Solicitud de rol creada"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/groups/{groupId}/transfer-ownership": {
      "post": {
        "tags": [
          "Groups"
        ],
        "summary": "Transferir propiedad del grupo",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "groupId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ID del grupo"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "new_owner_id": {
                    "type": "string"
                  }
                },
                "required": [
                  "new_owner_id"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Propiedad transferida"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "403": {
            "$ref": "#/components/responses/Forbidden"
          }
        }
      }
    },
    "/api/groups/{groupId}/reorder-turns": {
      "put": {
        "tags": [
          "Groups"
        ],
        "summary": "Reordenar turnos de miembros",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "groupId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ID del grupo"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "member_turns": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "user_id": {
                          "type": "string"
                        },
                        "new_position": {
                          "type": "integer"
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Turnos reordenados"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/groups/{groupId}/distribution/preview": {
      "get": {
        "tags": [
          "Groups"
        ],
        "summary": "Vista previa de distribución",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "groupId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ID del grupo"
          }
        ],
        "responses": {
          "200": {
            "description": "Vista previa de distribución del ciclo actual"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/groups/{groupId}/distribution/execute": {
      "post": {
        "tags": [
          "Groups"
        ],
        "summary": "Ejecutar distribución",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "groupId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ID del grupo"
          }
        ],
        "responses": {
          "200": {
            "description": "Distribución ejecutada"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "403": {
            "$ref": "#/components/responses/Forbidden"
          }
        }
      }
    },
    "/api/groups/{groupId}/distributions": {
      "get": {
        "tags": [
          "Groups"
        ],
        "summary": "Historial de distribuciones",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "groupId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ID del grupo"
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de distribuciones históricas"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/groups/{groupId}/export/members": {
      "get": {
        "tags": [
          "Groups"
        ],
        "summary": "Exportar miembros (PDF/CSV)",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "groupId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ID del grupo"
          },
          {
            "name": "format",
            "in": "query",
            "schema": {
              "type": "string"
            },
            "description": "Formato: pdf o csv"
          }
        ],
        "responses": {
          "200": {
            "description": "Archivo descargable de miembros"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/groups/{groupId}/export/payments": {
      "get": {
        "tags": [
          "Groups"
        ],
        "summary": "Exportar pagos (PDF/CSV)",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "groupId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ID del grupo"
          },
          {
            "name": "format",
            "in": "query",
            "schema": {
              "type": "string"
            },
            "description": "Formato: pdf o csv"
          }
        ],
        "responses": {
          "200": {
            "description": "Archivo descargable de pagos"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/groups/{groupId}/export/summary": {
      "get": {
        "tags": [
          "Groups"
        ],
        "summary": "Exportar resumen del grupo (PDF)",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "groupId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ID del grupo"
          }
        ],
        "responses": {
          "200": {
            "description": "Resumen del grupo en PDF"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/groups/{groupId}/invitations/{invitationId}/remind": {
      "post": {
        "tags": [
          "Groups"
        ],
        "summary": "Enviar recordatorio de invitación",
        "description": "Envía recordatorio al invitado. Cooldown de 24 horas.",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "groupId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ID del grupo"
          },
          {
            "name": "invitationId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ID de la invitación"
          }
        ],
        "responses": {
          "200": {
            "description": "Recordatorio enviado"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "429": {
            "description": "Cooldown de 24 horas no ha pasado"
          }
        }
      }
    },
    "/api/groups/{groupId}/settings": {
      "get": {
        "tags": [
          "Groups"
        ],
        "summary": "Obtener configuración del grupo",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "groupId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ID del grupo"
          }
        ],
        "responses": {
          "200": {
            "description": "Configuración de aprobación del grupo"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/groups/{groupId}/finances/summary": {
      "get": {
        "tags": [
          "Groups"
        ],
        "summary": "Resumen financiero del grupo",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "groupId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ID del grupo"
          }
        ],
        "responses": {
          "200": {
            "description": "Resumen financiero"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/groups/{groupId}/notifications/payment-reminders": {
      "post": {
        "tags": [
          "Groups"
        ],
        "summary": "Enviar recordatorios de pago",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "groupId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ID del grupo"
          }
        ],
        "responses": {
          "200": {
            "description": "Recordatorios enviados"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/groups/activate-tanda": {
      "post": {
        "tags": [
          "Groups"
        ],
        "summary": "Activar tanda del grupo",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "group_id": {
                    "type": "string"
                  }
                },
                "required": [
                  "group_id"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Tanda activada"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/groups/position-requests": {
      "get": {
        "tags": [
          "Groups"
        ],
        "summary": "Solicitudes de posición (coordinador)",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de solicitudes de posición"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/groups/approve-position-request": {
      "post": {
        "tags": [
          "Groups"
        ],
        "summary": "Aprobar solicitud de posición",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Solicitud aprobada"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/groups/reject-position-request": {
      "post": {
        "tags": [
          "Groups"
        ],
        "summary": "Rechazar solicitud de posición",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Solicitud rechazada"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/invitations/{userId}": {
      "get": {
        "tags": [
          "Groups"
        ],
        "summary": "Obtener invitaciones del usuario",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "userId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ID del usuario"
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de invitaciones recibidas"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/invitations/token/{token}": {
      "get": {
        "tags": [
          "Groups"
        ],
        "summary": "Ver invitación por token",
        "parameters": [
          {
            "name": "token",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Token de la invitación"
          }
        ],
        "responses": {
          "200": {
            "description": "Detalles de la invitación"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          }
        }
      }
    },
    "/api/invitations/token/{token}/accept": {
      "post": {
        "tags": [
          "Groups"
        ],
        "summary": "Aceptar invitación",
        "parameters": [
          {
            "name": "token",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Token de la invitación"
          }
        ],
        "responses": {
          "200": {
            "description": "Invitación aceptada, unido al grupo"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          }
        }
      }
    },
    "/api/invitations/token/{token}/decline": {
      "post": {
        "tags": [
          "Groups"
        ],
        "summary": "Rechazar invitación",
        "parameters": [
          {
            "name": "token",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Token de la invitación"
          }
        ],
        "responses": {
          "200": {
            "description": "Invitación rechazada"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          }
        }
      }
    },
    "/api/wallet/limits": {
      "get": {
        "tags": [
          "Wallet"
        ],
        "summary": "Obtener límites de wallet",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Límites actuales (diario, por transacción, mensual, PIN)"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      },
      "put": {
        "tags": [
          "Wallet"
        ],
        "summary": "Actualizar límites de wallet",
        "description": "Solo permite REDUCIR límites. Para aumentar, usar request-increase.",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "daily_withdrawal_limit": {
                    "type": "number"
                  },
                  "single_transaction_limit": {
                    "type": "number"
                  },
                  "monthly_limit": {
                    "type": "number"
                  },
                  "require_pin_threshold": {
                    "type": "number"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Límites actualizados"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/wallet/limits/request-increase": {
      "post": {
        "tags": [
          "Wallet"
        ],
        "summary": "Solicitar aumento de límite",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "requested_daily_limit": {
                    "type": "number"
                  },
                  "reason": {
                    "type": "string"
                  }
                },
                "required": [
                  "reason"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Solicitud de aumento creada (requiere revisión)"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/wallet/whitelist": {
      "get": {
        "tags": [
          "Wallet"
        ],
        "summary": "Listar direcciones de retiro",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "address_type",
            "in": "query",
            "schema": {
              "type": "string"
            },
            "description": "Filtrar: bank, mobile, crypto"
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de direcciones whitelisted"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      },
      "post": {
        "tags": [
          "Wallet"
        ],
        "summary": "Agregar dirección de retiro",
        "description": "Agrega dirección al whitelist. Genera código de verificación.",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "address_type": {
                    "type": "string",
                    "enum": [
                      "bank",
                      "mobile",
                      "crypto"
                    ]
                  }
                },
                "required": [
                  "address_type"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Dirección agregada, pendiente de verificación"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/wallet/whitelist/{whitelistId}/verify": {
      "post": {
        "tags": [
          "Wallet"
        ],
        "summary": "Verificar dirección de retiro",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "whitelistId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ID del whitelist"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "verification_code": {
                    "type": "string"
                  }
                },
                "required": [
                  "verification_code"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Dirección verificada"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/wallet/whitelist/{whitelistId}": {
      "delete": {
        "tags": [
          "Wallet"
        ],
        "summary": "Eliminar dirección de retiro",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "whitelistId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ID del whitelist"
          }
        ],
        "responses": {
          "200": {
            "description": "Dirección eliminada"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/payments/pending/{groupId}": {
      "get": {
        "tags": [
          "Wallet"
        ],
        "summary": "Pagos pendientes de un grupo",
        "parameters": [
          {
            "name": "groupId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ID del grupo"
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de pagos pendientes"
          }
        }
      }
    },
    "/api/payments/approve": {
      "post": {
        "tags": [
          "Wallet"
        ],
        "summary": "Aprobar pago (coordinador)",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "payment_id": {
                    "type": "string"
                  }
                },
                "required": [
                  "payment_id"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Pago aprobado"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/payments/reject": {
      "post": {
        "tags": [
          "Wallet"
        ],
        "summary": "Rechazar pago (coordinador)",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "payment_id": {
                    "type": "string"
                  },
                  "reason": {
                    "type": "string"
                  }
                },
                "required": [
                  "payment_id"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Pago rechazado"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/tandas/start": {
      "post": {
        "tags": [
          "Tandas"
        ],
        "summary": "Iniciar tanda",
        "description": "Solo coordinador. Requiere mínimo 2 miembros.",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "tanda_id": {
                    "type": "string"
                  }
                },
                "required": [
                  "tanda_id"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Tanda iniciada"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/tandas/{tandaId}": {
      "get": {
        "tags": [
          "Tandas"
        ],
        "summary": "Obtener detalles de tanda",
        "parameters": [
          {
            "name": "tandaId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ID de la tanda"
          }
        ],
        "responses": {
          "200": {
            "description": "Detalles de la tanda con participantes"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          }
        }
      }
    },
    "/api/tandas/request-position": {
      "post": {
        "tags": [
          "Tandas"
        ],
        "summary": "Solicitar posición en tanda",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Solicitud de posición creada"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/tandas/my-position-status": {
      "get": {
        "tags": [
          "Tandas"
        ],
        "summary": "Estado de mi posición",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Estado de posición del usuario"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/lottery/jaladores/{number}": {
      "get": {
        "tags": [
          "Lottery"
        ],
        "summary": "Números jaladores para un número",
        "parameters": [
          {
            "name": "number",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Número (00-99)"
          }
        ],
        "responses": {
          "200": {
            "description": "Números jaladores (companion numbers)"
          }
        }
      }
    },
    "/api/lottery/tabla-jaladora": {
      "get": {
        "tags": [
          "Lottery"
        ],
        "summary": "Tabla jaladora completa (25 grupos)",
        "responses": {
          "200": {
            "description": "Tabla completa de números jaladores"
          }
        }
      }
    },
    "/api/lottery/trial-spin": {
      "post": {
        "tags": [
          "Lottery"
        ],
        "summary": "Giro de prueba (sin cuenta)",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "draw_time": {
                    "type": "string"
                  }
                },
                "required": [
                  "draw_time"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Predicción de prueba (no se registra)"
          }
        }
      }
    },
    "/api/lottery/spin": {
      "post": {
        "tags": [
          "Lottery"
        ],
        "summary": "Girar ruleta de predicción",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "draw_time": {
                    "type": "string"
                  }
                },
                "required": [
                  "draw_time"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Predicción registrada"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/lottery/spin-status": {
      "get": {
        "tags": [
          "Lottery"
        ],
        "summary": "Estado de giros del usuario",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Giros disponibles y historial"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/lottery/history": {
      "get": {
        "tags": [
          "Lottery"
        ],
        "summary": "Historial de giros del usuario",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de predicciones pasadas"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/lottery/achievements": {
      "get": {
        "tags": [
          "Lottery"
        ],
        "summary": "Logros de lotería del usuario",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de logros desbloqueados"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/lottery/my-predictions": {
      "get": {
        "tags": [
          "Lottery"
        ],
        "summary": "Mis predicciones",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Historial de predicciones del usuario"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/lottery/social-feed": {
      "get": {
        "tags": [
          "Lottery"
        ],
        "summary": "Feed social de lotería",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Posts compartidos de predicciones"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/lottery/share-prediction": {
      "post": {
        "tags": [
          "Lottery"
        ],
        "summary": "Compartir predicción al feed",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Predicción compartida"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/marketplace/products/my": {
      "get": {
        "tags": [
          "Marketplace - Products"
        ],
        "summary": "Mis productos",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de productos del vendedor"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/marketplace/product-orders": {
      "get": {
        "tags": [
          "Marketplace - Products"
        ],
        "summary": "Mis órdenes de productos",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de órdenes de compra/venta"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/marketplace/product-orders/{orderId}/status": {
      "put": {
        "tags": [
          "Marketplace - Products"
        ],
        "summary": "Actualizar estado de orden",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "orderId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ID de la orden"
          }
        ],
        "responses": {
          "200": {
            "description": "Estado de orden actualizado"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/marketplace/wallet/balance": {
      "get": {
        "tags": [
          "Marketplace - Services"
        ],
        "summary": "Balance LTD del marketplace",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Balance de tokens LTD"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/marketplace/wallet/check-commission": {
      "post": {
        "tags": [
          "Marketplace - Services"
        ],
        "summary": "Verificar capacidad de comisión",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Estado de comisión del vendedor"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/marketplace/reviews/{serviceId}": {
      "get": {
        "tags": [
          "Marketplace - Services"
        ],
        "summary": "Reseñas de un servicio",
        "parameters": [
          {
            "name": "serviceId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ID del servicio"
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de reseñas del servicio"
          }
        }
      }
    },
    "/api/marketplace/subscription": {
      "get": {
        "tags": [
          "Marketplace - Services"
        ],
        "summary": "Estado de suscripción",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Tipo y estado de suscripción del vendedor"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/marketplace/subscription/upgrade": {
      "post": {
        "tags": [
          "Marketplace - Services"
        ],
        "summary": "Mejorar suscripción",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Suscripción mejorada"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/marketplace/messages/conversations": {
      "get": {
        "tags": [
          "Marketplace - Services"
        ],
        "summary": "Conversaciones del marketplace",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de conversaciones"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/marketplace/messages": {
      "post": {
        "tags": [
          "Marketplace - Services"
        ],
        "summary": "Enviar mensaje en marketplace",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Mensaje enviado"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/marketplace/messages/unread": {
      "get": {
        "tags": [
          "Marketplace - Services"
        ],
        "summary": "Mensajes no leídos",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Conteo de mensajes no leídos"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/marketplace/messages/read": {
      "put": {
        "tags": [
          "Marketplace - Services"
        ],
        "summary": "Marcar mensajes como leídos",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Mensajes marcados como leídos"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/marketplace/referrals/my-code": {
      "get": {
        "tags": [
          "Marketplace - Services"
        ],
        "summary": "Mi código de referido",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Código de referido del usuario"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/marketplace/referrals/track": {
      "post": {
        "tags": [
          "Marketplace - Services"
        ],
        "summary": "Registrar click de referido",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Click registrado"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/marketplace/referrals/history": {
      "get": {
        "tags": [
          "Marketplace - Services"
        ],
        "summary": "Historial de referidos",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de referidos y estados"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/marketplace/referrals/payout": {
      "post": {
        "tags": [
          "Marketplace - Services"
        ],
        "summary": "Solicitar pago de comisiones",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Solicitud de pago creada"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/marketplace/referrals/payouts": {
      "get": {
        "tags": [
          "Marketplace - Services"
        ],
        "summary": "Historial de pagos de referidos",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Lista de pagos de comisiones"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/matching/preferences": {
      "post": {
        "tags": [
          "User"
        ],
        "summary": "Guardar preferencias de matching",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "location": {
                    "type": "string"
                  },
                  "contribution_range": {
                    "type": "object"
                  },
                  "preferred_frequency": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Preferencias guardadas"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/matching/preferences/{userId}": {
      "get": {
        "tags": [
          "User"
        ],
        "summary": "Obtener preferencias de matching",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "userId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ID del usuario"
          }
        ],
        "responses": {
          "200": {
            "description": "Preferencias de matching del usuario"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/conversion/request": {
      "post": {
        "tags": [
          "Wallet"
        ],
        "summary": "Solicitar conversión de tokens",
        "description": "Convierte tokens testnet a mainnet. Transacción FOR UPDATE.",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Conversión procesada"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/proof/{filename}": {
      "get": {
        "tags": [
          "Contributions"
        ],
        "summary": "Obtener imagen de comprobante",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "filename",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Nombre del archivo de comprobante"
          }
        ],
        "responses": {
          "200": {
            "description": "Imagen del comprobante"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          }
        }
      }
    },
    "/api/receipt/{filename}": {
      "get": {
        "tags": [
          "Wallet"
        ],
        "summary": "Obtener imagen de recibo",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "filename",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Nombre del archivo de recibo"
          }
        ],
        "responses": {
          "200": {
            "description": "Imagen del recibo"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          }
        }
      }
    },
    "/api/user/devices/{deviceId}": {
      "delete": {
        "tags": [
          "User"
        ],
        "summary": "Revocar sesión",
        "security": [
          {
            "BearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "deviceId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ID de la sesión/dispositivo"
          }
        ],
        "responses": {
          "200": {
            "description": "Sesión revocada"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/referrals/validate/{referralCode}": {
      "get": {
        "tags": [
          "Public"
        ],
        "summary": "Validar código de referido",
        "parameters": [
          {
            "name": "referralCode",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Código de referido"
          }
        ],
        "responses": {
          "200": {
            "description": "Código válido con nombre del referente"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          }
        }
      }
    }
  }
}